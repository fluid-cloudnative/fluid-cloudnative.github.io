<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-case-study/haomo-case-study" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">HAOMO&#x27;s Case Study | Fluid</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fluid-cloudnative.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fluid-cloudnative.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fluid-cloudnative.github.io/docs/next/case-study/haomo-case-study"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="HAOMO&#x27;s Case Study | Fluid"><meta data-rh="true" name="description" content="This article mainly discusses the application of HAOMO.AI&#x27;s machine learning platform in autonomous driving scenarios."><meta data-rh="true" property="og:description" content="This article mainly discusses the application of HAOMO.AI&#x27;s machine learning platform in autonomous driving scenarios."><link data-rh="true" rel="icon" href="/img/fluid-icon-color.png"><link data-rh="true" rel="canonical" href="https://fluid-cloudnative.github.io/docs/next/case-study/haomo-case-study"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/docs/next/case-study/haomo-case-study" hreflang="en"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/zh/docs/next/case-study/haomo-case-study" hreflang="zh"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/docs/next/case-study/haomo-case-study" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://LFPGLLH528-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Fluid RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Fluid Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Fluid" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.8e3a1f9d.css">
<script src="/assets/js/runtime~main.2099daf6.js" defer="defer"></script>
<script src="/assets/js/main.3f02f497.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/fluid-horizontal-color.png" alt="Fluid" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/fluid-horizontal-white.png" alt="Fluid" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" sidebarid="communitySidebar" href="/community/meeting_schedule">Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next">Latest ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/case-study/haomo-case-study">Latest ðŸš§</a></li><li><a class="dropdown__link" href="/docs/case-study/haomo-case-study">v1.0</a></li><li><a class="dropdown__link" href="/docs/v0.9/case-study/haomo-case-study">v0.9</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/next/case-study/haomo-case-study" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/next/case-study/haomo-case-study" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/get-started/quick-start">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/demos/demo-accelerate-remote-file-accessing-with-fluid">Demos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/tutorials/dataset-creation/accelerate-data-accessing-posix">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/operation-guide/runtime-monitoring">Operation Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/developer-guide/how-to-develop">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/next/case-study/alibaba-case-study">Case Study</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-study/alibaba-case-study">Alibaba&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-study/weibo-case-study">Weibo&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-study/metabit-trading-case-study">Metabit Trading&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/case-study/haomo-case-study">HAOMO&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-study/zuoyebang-case-study">Zuoyebang&#x27;s Case Study</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/troubleshooting-and-faq/troubleshooting">Troubleshooting and FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/release-and-API-doc/release">Release and API Doc</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Fluid<!-- --> <b>Latest ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/case-study/haomo-case-study">latest version</a></b> (<!-- -->v1.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Case Study</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HAOMO&#x27;s Case Study</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Latest ðŸš§</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>HAOMO&#x27;s Case Study</h1>
<blockquote>
<p>This article mainly discusses the application of HAOMO.AI&#x27;s machine learning platform in autonomous driving scenarios.</p>
</blockquote>
<p><em>By Li Fan, Server-end Development Engineer of HAOMO.AI, responsible for the development of the AI automatic training platform and algorithm optimization and Chen Tiewen, Server-End Development Engineer of HAOMO.AI, responsible for the upper layer development of the AI automatic training platform</em></p>
<p><a href="https://www.alibabacloud.com/help/doc-detail/208335.htm" target="_blank" rel="noopener noreferrer">Fluid</a> is an open-source cloud-native data orchestration and acceleration project of CNCF, initiated jointly by Nanjing University, Alibaba Cloud, and the Alluxio community. This article mainly discusses the application of HAOMO.AI&#x27;s <a href="https://www.alibabacloud.com/product/machine-learning" target="_blank" rel="noopener noreferrer">machine learning platform</a> in autonomous driving scenarios and how to break the performance bottleneck of the existing architecture that separates storage and computing based on Fluid + JindoFS. The utilization of production resources can be improved with <a href="https://www.alibabacloud.com/help/doc-detail/208335.htm" target="_blank" rel="noopener noreferrer">Fluid</a> + <a href="https://www.alibabacloud.com/help/doc-detail/199488.htm" target="_blank" rel="noopener noreferrer">JindoFS</a>, and the pressure on <a href="https://www.alibabacloud.com/product/object-storage-service" target="_blank" rel="noopener noreferrer">OSS</a> bandwidth can be alleviated, thus improving the training efficiency in production practice significantly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-autonomous-driving-is-moving-into-the-fast-lane-of-commercial-application">1. Autonomous Driving Is Moving into the Fast Lane of Commercial Application<a href="#1-autonomous-driving-is-moving-into-the-fast-lane-of-commercial-application" class="hash-link" aria-label="Direct link to 1. Autonomous Driving Is Moving into the Fast Lane of Commercial Application" title="Direct link to 1. Autonomous Driving Is Moving into the Fast Lane of Commercial Application">â€‹</a></h2>
<p>HAOMO.AI is an AI technology company dedicated to autonomous driving and provides intelligent logistics solutions. We aim at zero accidents, zero congestion, free traveling, and efficient logistics. We help clients reshape and comprehensively upgrade the traveling and logistics modes of the whole society.</p>
<p>Data intelligence is the core capability of our company. We provide three vertical products for data intelligence: autonomous driving systems and solutions for passenger vehicles, ecosystem and solutions for low-speed driverless cars, and development and customized services for autonomous driving-related products.</p>
<p>Data intelligence can also help these vertical products and consolidate their leading positions in their respective markets in return. After nearly ten years of accumulation, full-stack exclusive development, and abundant R&amp;D investment, we have accumulated relevant data in the aspects of passenger cars, low-speed driverless cars, and intelligent hardware. Currently, we have incubated more than ten mature products, such as Xiaomohe, Xiaomotuo, and Xiaomopan.</p>
<p>The rapid development of HAOMO.AI also reflects that higher-level intelligent driving will play a role in a wider range of scenarios, and autonomous driving is moving into the fast lane of commercial application.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/haomo-arch-832e9663371e39928b06405de77016ed.jpeg" width="1251" height="681" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-training-effectiveness-of-traditional-machine-learning-encounters-a-bottleneck">2. Training Effectiveness of Traditional Machine Learning Encounters a Bottleneck<a href="#2-training-effectiveness-of-traditional-machine-learning-encounters-a-bottleneck" class="hash-link" aria-label="Direct link to 2. Training Effectiveness of Traditional Machine Learning Encounters a Bottleneck" title="Direct link to 2. Training Effectiveness of Traditional Machine Learning Encounters a Bottleneck">â€‹</a></h2>
<p>The machine learning platform has played a very central role in the widespread application of machine learning in autonomous driving scenarios. The platform adopts the architecture with separation of storage and computing, which decouples computing resources from storage resources. As such, it provides flexible resource allocation, realizes convenient storage expansion, and reduces storage and O&amp;M costs.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/haomo-ml-arch-66b3bc6989ba2b2ff5d367d89b40802d.png" width="554" height="349" class="img_ev3q"></p>
<p>However, this architecture also brings some challenges, among which the most critical ones lie in data access performance and stability:</p>
<p><strong>1) The separation of computing and storage leads to high latency in data access and slows down the training.</strong></p>
<p>Our business teams need to frequently access the data on OSS in real-time during the training process of machine learning tasks. When OSS bandwidth is limited or the pressure is high, accessing data on OSS is much slower than accessing local files.</p>
<p><strong>2) The Kubernetes scheduler cannot perceive the data cache, and the access to the same data source is still slow after running it multiple times.</strong></p>
<p>In real-world applications, deep learning tasks access the same data repeatedly, including tasks with the same model but different hyperparameters, tasks with the fine-tuning model and the same input, and AutoML tasks. Repeated data access of this deep learning task results in a reusable data cache. However, the native Kubernetes scheduler cannot perceive the cache. So, the result of application scheduling is not good, and the cache cannot be reused, which cannot improve the performance.</p>
<p><strong>3) OSS becomes a bottleneck of concurrent data access, bringing challenges to stability.</strong></p>
<p>A large number of machine learning tasks on the HAOMO.AI machine learning platform concurrently access the backend OSS storage during simultaneous training. The I/O pressure caused by this concurrent machine learning training is relatively high, and OSS service becomes a single point of performance. Once OSS bandwidth has a bottleneck, all machine learning tasks will be affected.</p>
<p><strong>4) Training files are scattered, and metadata pressure is high.</strong></p>
<p>The training data files of machine learning tasks are usually scattered in different paths. The list operation in reading these files takes a lot of time and has poor performance on OSS. Therefore, there is a lot of pressure on OSS metadata when performing large-scale list operations. Timeouts or list failures often occur.</p>
<p>In real-world applications, through monitoring and analysis on the HAOMO.AI machine learning platform, we found that the I/O performance problem will make expensive computing resources, such as GPU, not fully utilized. The characteristics of machine learning training lead to scattered access to data files and high metadata pressure. If metadata and file data can be cached carefully, cache efficiency and disk utilization can be improved, and the metadata loss issue caused by file lookups can be solved.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-production-practice-of-accelerating-model-inference-and-training-based-on-fluid--jindoruntime">3. Production Practice of Accelerating Model Inference and Training Based on Fluid + JindoRuntime<a href="#3-production-practice-of-accelerating-model-inference-and-training-based-on-fluid--jindoruntime" class="hash-link" aria-label="Direct link to 3. Production Practice of Accelerating Model Inference and Training Based on Fluid + JindoRuntime" title="Direct link to 3. Production Practice of Accelerating Model Inference and Training Based on Fluid + JindoRuntime">â€‹</a></h2>
<p>It is necessary to improve the data localization on data access during model training to meet the requirements of high efficiency in large-scale machine learning model training. We hope to achieve the following goals:</p>
<ul>
<li>Computing can make full use of localization to access data, so data does not need to be read repeatedly through networks. This will accelerate the training of the machine learning model and improve the GPU usage of clusters.</li>
<li>The load pressure on OSS can be reduced. The latency in data access and the bandwidth pressure on OSS can be reduced by applying local reading of some data.</li>
<li>The advantages of cache nodes for hot data sets can be maximized. So, they can intelligently schedule tasks to data cache nodes without the perception of users. Thus, common model training programs can be faster.</li>
<li>Specified files are cached in a custom file list. Only the files that require training are cached, which improves the cache usage and disk utilization.</li>
<li>Metadata cache and data cache are separated. We can independently cache the metadata of files and provide a custom cache policy.</li>
<li>Data can be read through the POSIX interface. This can eliminate the need to use different data access interfaces during the model development phase and training phase. Thus, the cost of developing machine learning model programs is reduced.</li>
</ul>
<p>We are eager to find a system platform with distributed cache acceleration capabilities on Kubernetes to achieve these goals. Fortunately, we found Fluid, a CNCF Sandbox project that can meet our demands. Therefore, we have designed a new architecture scheme based on Fluid. After verification and comparison, we chose JindoRuntime as the acceleration run time.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/haomo-with-fluid-arch-64257857f3675c1dbc2bda9f76974486.png" width="1269" height="895" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-technical-solution">3.1 Technical Solution<a href="#31-technical-solution" class="hash-link" aria-label="Direct link to 3.1 Technical Solution" title="Direct link to 3.1 Technical Solution">â€‹</a></h3>
<p><strong>Fluid</strong></p>
<p>Fluid is an extensible and distributed data orchestration and acceleration system running on Kubernetes. It orchestrates data and schedules the applications that use data. As such, it solves the pain points that the cloud-native orchestration framework faces when running such applications, such as the high latency of data access, the difficulty in the joint analysis of multiple data sources, and the complex process of using data.</p>
<p><strong>JindoRuntime</strong></p>
<p>JindoRuntime is a distributed cache runtime implementation of Fluid based on the JindoFS distributed cache acceleration engine. JindoFS is an engine for optimizing big data storage developed by the Alibaba Cloud Open-Source Big Data and Data Lake Storage Team. It is fully compatible with the Hadoop file system interface and brings clients more flexible and efficient computing and storage solutions. JindoRuntime uses the cache mode of JindoFS to access and cache remote files. It supports the access and cache acceleration for various storage products, such as OSS, HDFS, and AWS S3. The process of using and deploying JindoRuntime on Fluid is simple. It is compatible with the native Kubernetes environment and provides out-of-the-box features. It profoundly integrates the features of OSS and optimizes performance with the Native framework. It supports on-cloud data security features, such as password-free and checksum verification.</p>
<p>The reasons for choosing JindoRuntime on Fluid are listed below:</p>
<ul>
<li>Fluid can orchestrate datasets in Kubernetes clusters to achieve the same placement of data and computing. It can also provide interfaces based on Persistent Volume Claim to connect to applications on Kubernetes seamlessly. At the same time, JindoRuntime provides acceleration for accessing and caching data on HDFS. With the POSIX file system interface of FUSE, we can easily use the massive files on HDFS like in a local disk. Deep learning training tools, such as PyTorch, can use the POSIX file interface to read the training data.</li>
<li>It provides distributed caching of metadata and data, and we can cache and prefetch the metadata independently.</li>
<li>It provides metadata caching and prefetching to avoid a large number of metadata operations of training files on OSS. It provides a data prefetching mechanism to avoid data access competition caused by pulling data during the training.</li>
<li>It provides custom, fine-grained prefetching of data in the form of file lists.</li>
<li>With the data perception and scheduling capability of Fluid, users do not need to know the information of cache nodes to place tasks to nodes with cached data. This maximizes the advantages of data access performance.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-practices">3.2 Practices<a href="#32-practices" class="hash-link" aria-label="Direct link to 3.2 Practices" title="Direct link to 3.2 Practices">â€‹</a></h3>
<p><strong>Select Appropriate Cache Nodes</strong></p>
<p>We can enjoy better local data performance with JindoRuntime. In production, we have found that using all cache nodes for storage does not necessarily bring better performance. The reason is that the disk and network I/O performance of some nodes is not very good. We need to select cache nodes with large-capacity disks and better networks to solve this problem. Fluid supports the schedulability of datasets, namely the schedulability of cache nodes. We schedule cache nodes of datasets by specifying the nodeAffinity of datasets to ensure that cache nodes provide cache services efficiently.</p>
<p><strong>Configure the Cache Capacity and Path</strong></p>
<p>We can use the Mounts of dataset and tiered-store of JindoRuntime to set the mounting directory of data. At the same time, tiered-store of JindoRuntime can be configured manually to constrain the maximum cache capacity and resource usage and avoid too much cache volume caused by mass data. Data with resource usage exceeding the limit will be discarded automatically. Tiered-store also includes the setting of the cache storage path and storage layer (SSD/MEM/HDD) to meet the needs of various scenarios. For multi-node scenarios, the replacement of datasets can support the deployment of multiple datasets on the same cluster.</p>
<p><strong>Set Caching Security Policy</strong></p>
<p>When creating a dataset in Fluid, sometimes, we need to configure some sensitive information in the mounts of the OSS account, such as accessKeyId and accessKeySecret. Fluid provides the capability to use Secret to configure sensitive information and ensure security. After creating Secret, the dataset uses the EncryptOptions field to specify the name of the Secret to bind the sensitive information.</p>
<p><strong>Preload the Data</strong></p>
<p>The first time you access the mounted data for the created dataset and JindoRuntime, all the files in the data catalog will be downloaded. This causes a problem. If the catalog where the data resides contains other data that do not have to be used, space resources and network resources will be wasted meaninglessly. Fluid supports data preloading and metadata caching to avoid this problem. You can dynamically inject data by creating a dataload to read the data path information to be preloaded. Dataload supports caching metadata and masking access to non-preloaded data, which reduces the efficiency of data access significantly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-significant-performance-improvement-brought-by-jindoruntime">3.3 Significant Performance Improvement Brought by JindoRuntime<a href="#33-significant-performance-improvement-brought-by-jindoruntime" class="hash-link" aria-label="Direct link to 3.3 Significant Performance Improvement Brought by JindoRuntime" title="Direct link to 3.3 Significant Performance Improvement Brought by JindoRuntime">â€‹</a></h3>
<p>We use different models to infer and train the same data. We conduct inference and training with and without JindoRuntime. After comparing their training time, we found that JindoRuntime brought a significant performance improvement.</p>
<ul>
<li><em>The test result of the model inferring 10,000 frames of images on the cloud</em></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/haomo-test-result-1-b82da377e47d2c2986a6896063b7f334.png" width="554" height="343" class="img_ev3q"></p>
<ul>
<li><em>The test result of another larger model inferring 10,000 frames of images on the cloud</em></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/haomo-test-result-2-caac3a8c5d030505819e389205ea4965.png" width="554" height="371" class="img_ev3q"></p>
<ul>
<li><em>Time consumption of a model with 4 GPUs to train 10,000 frames of images on the cloud</em></li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/haomo-test-result-3-ead204935008817ec82d393389f3eaf6.png" width="554" height="345" class="img_ev3q"></p>
<p>The efficiency of cloud training and inference improves significantly with Fluid + JindoRuntime, especially for some small models. JindoRuntime can solve the I/O bottleneck problem, and the training can be accelerated by up to about 300%. It also improves the efficiency of GPU usage on the cloud and accelerates the efficiency of data-driven iterations on the cloud.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-build-an-open-source-fluid-ecosystem-together-to-make-more-industries-smarter">4. Build an Open-Source Fluid Ecosystem Together to Make More Industries &quot;Smarter&quot;<a href="#4-build-an-open-source-fluid-ecosystem-together-to-make-more-industries-smarter" class="hash-link" aria-label="Direct link to 4. Build an Open-Source Fluid Ecosystem Together to Make More Industries &quot;Smarter&quot;" title="Direct link to 4. Build an Open-Source Fluid Ecosystem Together to Make More Industries &quot;Smarter&quot;">â€‹</a></h2>
<p>Machine learning and training scenarios of HAOMO.AI have high requirements for data reading performance and fine-grained control of metadata and data caching. The caching capability of Fluid + JindoRuntime allows flexible caching of metadata and data of OSS training files to provide efficient access performance for metadata and data. Based on this solution, we can achieve fine-grained control of cached content and improve the utilization of production resources. This relieves the pressure on OSS bandwidth and improves training efficiency.</p>
<p>Currently, Fluid + JindoRuntime can meet the basic needs of the production environment. It accelerates OSS, and the fine-grained cache policy it provides is more efficient. We hope elastic data acceleration can be a differentiated competitive capability of the HAOMO.AI machine learning platform. We also hope that it will improve the speed of overall training tasks and the utilization of computing resources. In the future, we also hope to help the community continue to evolve and help more developers. Specifically, we plan to add the following features to the platform:</p>
<ul>
<li>Support scheduled tasks and dynamic scale-in and scale-out</li>
<li>Provide a performance monitoring console</li>
<li>Support full lifecycle management of multiple datasets in a scale Kubernetes cluster</li>
<li>Support dynamic deletion of cached data and metadata</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="acknowledgment">Acknowledgment<a href="#acknowledgment" class="hash-link" aria-label="Direct link to Acknowledgment" title="Direct link to Acknowledgment">â€‹</a></h2>
<p>Thanks to Chenshan and Yangli of the Alibaba Cloud JindoFS Team and Cheyang of the Container Team for all their help during the designing and optimization process. They have given customized support for the requirements in the production process and have solved the various problems we encountered quickly.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fluid-cloudnative/fluid-cloudnative.github.io/tree/master/docs/case-study/haomo-case-study.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-04-17T09:10:55.000Z">Apr 17, 2024</time></b> by <b>chenqiming</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/case-study/metabit-trading-case-study"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Metabit Trading&#x27;s Case Study</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/case-study/zuoyebang-case-study"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Zuoyebang&#x27;s Case Study</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-autonomous-driving-is-moving-into-the-fast-lane-of-commercial-application" class="table-of-contents__link toc-highlight">1. Autonomous Driving Is Moving into the Fast Lane of Commercial Application</a></li><li><a href="#2-training-effectiveness-of-traditional-machine-learning-encounters-a-bottleneck" class="table-of-contents__link toc-highlight">2. Training Effectiveness of Traditional Machine Learning Encounters a Bottleneck</a></li><li><a href="#3-production-practice-of-accelerating-model-inference-and-training-based-on-fluid--jindoruntime" class="table-of-contents__link toc-highlight">3. Production Practice of Accelerating Model Inference and Training Based on Fluid + JindoRuntime</a><ul><li><a href="#31-technical-solution" class="table-of-contents__link toc-highlight">3.1 Technical Solution</a></li><li><a href="#32-practices" class="table-of-contents__link toc-highlight">3.2 Practices</a></li><li><a href="#33-significant-performance-improvement-brought-by-jindoruntime" class="table-of-contents__link toc-highlight">3.3 Significant Performance Improvement Brought by JindoRuntime</a></li></ul></li><li><a href="#4-build-an-open-source-fluid-ecosystem-together-to-make-more-industries-smarter" class="table-of-contents__link toc-highlight">4. Build an Open-Source Fluid Ecosystem Together to Make More Industries &quot;Smarter&quot;</a></li><li><a href="#acknowledgment" class="table-of-contents__link toc-highlight">Acknowledgment</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.slack.com/client/T08PSQ7BQ/C02ADG209SP" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack (#fluid channel)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community/meeting_schedule">DingTalk (GroupID: 32850151)</a></li><li class="footer__item"><a class="footer__link-item" href="/community/meeting_schedule">Meeting</a></li><li class="footer__item"><a href="https://github.com/fluid-cloudnative/fluid/blob/master/README.md#community" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 The Fluid Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: 
        https://www.linuxfoundation.org/trademark-usage</div></div></div></footer></div>
</body>
</html>