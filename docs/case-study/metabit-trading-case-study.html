<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-case-study/metabit-trading-case-study" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Metabit Trading&#x27;s Case Study | Fluid</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fluid-cloudnative.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fluid-cloudnative.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fluid-cloudnative.github.io/docs/case-study/metabit-trading-case-study"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Metabit Trading&#x27;s Case Study | Fluid"><meta data-rh="true" name="description" content="This article introduces the support of elastic quantitative investment and research of public cloud based on Fluid + JuiceFSRuntime"><meta data-rh="true" property="og:description" content="This article introduces the support of elastic quantitative investment and research of public cloud based on Fluid + JuiceFSRuntime"><link data-rh="true" rel="icon" href="/img/fluid-icon-color.png"><link data-rh="true" rel="canonical" href="https://fluid-cloudnative.github.io/docs/case-study/metabit-trading-case-study"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/docs/case-study/metabit-trading-case-study" hreflang="en"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/zh/docs/case-study/metabit-trading-case-study" hreflang="zh"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/docs/case-study/metabit-trading-case-study" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Fluid RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Fluid Atom Feed"><link rel="stylesheet" href="/assets/css/styles.271e0816.css">
<script src="/assets/js/runtime~main.09081afe.js" defer="defer"></script>
<script src="/assets/js/main.49701649.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/fluid-horizontal-color.png" alt="Fluid" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/fluid-horizontal-white.png" alt="Fluid" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" sidebarid="communitySidebar" href="/community/meeting_schedule">Community</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">0.9 ðŸš§</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/case-study/metabit-trading-case-study" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/case-study/metabit-trading-case-study" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/get-started/quick-start">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/demos/demo-accelerate-remote-file-accessing-with-fluid">Demos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/dataset-creation/accelerate-data-accessing-posix">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/operation-guide/runtime-monitoring">Operation Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/developer-guide/how-to-develop">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/case-study/alibaba-case-study">Case Study</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/case-study/alibaba-case-study">Alibaba&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/case-study/weibo-case-study">Weibo&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/case-study/metabit-trading-case-study">Metabit Trading&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/case-study/metabit-trading-study">Metabit Trading&#x27;s Case Study</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/troubleshooting-and-faq/troubleshooting">Troubleshooting and FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release-and-API-doc/release">Release and API Doc</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Case Study</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Metabit Trading&#x27;s Case Study</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Metabit Trading&#x27;s Case Study</h1>
<blockquote>
<p>This article introduces the support of elastic quantitative investment and research of public cloud based on Fluid + JuiceFSRuntime</p>
</blockquote>
<p><em>By Zhiyi Li and Jianhong Li</em></p>
<p>The advances in machine learning, cloud computing, cloud-native, and other technologies have injected new impetus into the innovation of the financial industry. A typical example is Metabit Trading, a technology-based quantitative trading company with artificial intelligence as its core. They have created long-term and sustainable returns for investors by deeply integrating and improving machine learning algorithms and applying them to financial data with low signal-to-noise ratios.</p>
<p>Unlike traditional quantitative analysis, machine learning focuses on structured data (such as stock prices, trading volumes, and historical returns) and injects unstructured data from research reports, financial reports, news, and social media to gain insight into security price movements and volatility. However, it is challenging to apply machine learning to quantitative studies because the raw data may contain noises. In addition, they need to deal with many challenges (such as unexpected tasks, high concurrent data access, and computing resource constraints).</p>
<p>Metabit Trading continues to make efforts in R&amp;D investment, innovation support, and basic platform construction to solve these problems. Their research infrastructure team has built an efficient, secure, and scalable R&amp;D process of tool chain, breaking through the limitations of stand-alone R&amp;D by leveraging cloud computing and open-source technology. This article shares the specific practices of the basic platform for quantitative research and introduces the support of elastic quantitative investment and research of public cloud based on Fluid + JuiceFSRuntime.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-detailed-explanation-of-quantitative-research">A Detailed Explanation of Quantitative Research<a href="#a-detailed-explanation-of-quantitative-research" class="hash-link" aria-label="Direct link to A Detailed Explanation of Quantitative Research" title="Direct link to A Detailed Explanation of Quantitative Research">â€‹</a></h2>
<p>As an AI-powered hedge fund, strategy research through AI model training is our main research method. First, we need to extract features from the raw data before training the model. The signal-to-noise ratio of financial data is low. If we directly use raw data for training, the resulting model will be noisy. In addition to market data (such as stock price and trading volume that we often see in the market), raw data includes some non-volume and price data (such as research reports, financial reports, news, social media, and other unstructured data). Researchers will extract features through a series of transformations and then train AI models. You can refer to the following simplified diagram of the strategy research pattern that is most closely related to machine learning in our research scenario.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/metabit-trading-current-flow-3165252d7621fb4606af870934421b4f.png" width="1080" height="390" class="img_ev3q"></p>
<p>Model training produces models and signals. A signal is a judgment about future price trends, and the strength of the signal means the strength of strategic orientation. The quantitative researcher will use this information to optimize the portfolio to form a real-time position for trade. In this process, the horizontal dimension (stocks) will be considered for risk control. For example, do not excessively hold stocks in a particular industry. When a position strategy is formed, quantitative researchers will place simulated orders and get the profit and loss information corresponding to the real-time position to understand the profit of the strategy. This is a complete process of quantitative research.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-for-quantitative-research-basic-platform">Requirements for Quantitative Research Basic Platform<a href="#requirements-for-quantitative-research-basic-platform" class="hash-link" aria-label="Direct link to Requirements for Quantitative Research Basic Platform" title="Direct link to Requirements for Quantitative Research Basic Platform">â€‹</a></h2>
<ol>
<li>
<p><strong>There are many unexpected tasks and high elasticity requirements.</strong> In the process of strategy research, quantitative researchers will generate strategic ideas and test their ideas through experiments. Therefore, computing platforms will generate a large number of unexpected tasks, so we have high requirements for computing Auto Scaling capability.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/metabit-trading-workload-82fe76e02ef18c646792af13e3781774.png" width="1080" height="394" class="img_ev3q"></p>
<p>The preceding figure shows the running instance data of a cluster over a period. Take it as an example: the number of instances of the whole cluster can reach thousands at peak hours in multiple time periods, but at the same time, the scale of the computing cluster can be scaled in to zero. There is a strong correlation between the computing tasks of quantitative institutions and the researcher&#x27;s R&amp;D progress. There are big gaps between peaks and troughs, which is also a feature of offline research tasks.</p>
</li>
<li>
<p><strong>Hot data is accessed in a high-concurrency scenario.</strong> In addition to computing, data caching requires elasticity. For hot data (such as market data), there are usually hundreds of tasks accessing data at the same time, and it has very high throughput requirements. At its peak, the aggregate bandwidth of hundreds of Gbps (or even Tbps) is required. However, when there are no nodes in the computing cluster, the throughput requirement is 0. If the throughput is rigid, elastic throughput scaling is required.</p>
</li>
<li>
<p><strong>It is important to perform financial model training to have independent linear extensibility of capacity and throughput.</strong> Traditional distributed storage bandwidth and throughput are only proportional to data usage capacity. However, during quantitative research, a large number of containers are created to concurrently access the data of the storage system, which triggers access limiting of the storage system. This leads to the mismatch between the ultrahigh elasticity of computing resources and the limited bandwidth of the storage system. However, the amount of data for quantitative research is not particularly large, and the total amount of volume and price data in many markets will not exceed the TB level. However, the peak throughput required for data access is very high.</p>
</li>
<li>
<p><strong>Data affinity scheduling. The same data source accessing local cache multiple times can be reused.</strong> Give full play to the advantages of cache nodes of hot datasets and intelligently schedule tasks to data cache nodes without disturbing users&#x27; perceptions. Thus, common model training programs can be faster.</p>
</li>
<li>
<p><strong>IP Protection â€“ Data Sharing and Data Isolation</strong>: For IP protection, it is important to isolate in computing tasks and have access control ability for data. At the same time, it is important to support researchers to obtain public data (such as market data) in a convenient way.</p>
</li>
<li>
<p><strong>Cache Intermediate Results</strong>: In scenarios where computing tasks are modularized, storage and transmission of intermediate results are also required. For example, a large amount of feature data will be generated during feature computing, and these data will be immediately used on the following large-scale and highly concurrent training nodes. In this scenario, we need a high-throughput and high-stability intermediate cache for data transmission.</p>
</li>
<li>
<p><strong>Support for Multiple File Systems</strong>: Different types of computing tasks will correspond to different data types and usage. Therefore, our teams will use different file systems (including OSS, CPFS, NAS, and JuiceFS) to optimize the performance in respective situations. Different runtime of Fluid can flexibly support the combination of file systems and tasks, so task computing can use corresponding resources on Kubernetes in a more efficient and reasonable manner and avoid unnecessary waste.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fluid--juicefsruntime-provide-efficient-support-for-quantitative-research-basic-platform-on-the-cloud">Fluid + JuiceFSRuntime: Provide Efficient Support for Quantitative Research Basic Platform on the Cloud<a href="#fluid--juicefsruntime-provide-efficient-support-for-quantitative-research-basic-platform-on-the-cloud" class="hash-link" aria-label="Direct link to Fluid + JuiceFSRuntime: Provide Efficient Support for Quantitative Research Basic Platform on the Cloud" title="Direct link to Fluid + JuiceFSRuntime: Provide Efficient Support for Quantitative Research Basic Platform on the Cloud">â€‹</a></h2>
<p>Considering POSIX compatibility, cost, and high throughput, we chose the JuiceFS cloud service as the distributed basic storage. After choosing JuiceFS, we found that the existing CSI system of Kubernetes cannot support our requirements for data access performance, elastic throughput, and data sharing and isolation well. Specifically:</p>
<ol>
<li>
<p>The traditional Persistent Volume Claim is designed for general storage and lacks good support for the access mode of complex data stored in the same storage. In different application scenarios, applications use different files in the same storage in different ways. For example, most concurrent computing tasks require read-only. However, there are also Pipeline data transfers. After data features are generated, they need to be transferred to model training, which requires reading and writing. This makes it difficult to uniformly set metadata update and cache policy in the same PVC. These policies should depend on the patterns in which the application uses the data.</p>
</li>
<li>
<p><strong>Data Isolation and Sharing</strong>: Different data teams need to be isolated and require easy management when accessing different datasets. At the same time, it supports access and sharing of public datasets, especially cache data sharing. Public data (such as market data) will be used repeatedly by different teams of researchers, and they hope to obtain the effect of getting all things done once and forever.</p>
</li>
<li>
<p><strong>Data Cache-Aware Kubernetes Scheduling</strong>: Jobs with the same model, the same input, and different super parameters and jobs with fine-tuning models and the same input will repeatedly access the same data, resulting in reusable data caches. However, the native Kubernetes scheduler is not cache-aware, resulting in poor application scheduling, unreusable cache, and no performance improvement.</p>
</li>
<li>
<p><strong>Data access throughput can be flexibly scaled out to hundreds of Gbit/s</strong>: For a traditional distributed file storage with high performance, its general storage specification is 200 MB/s/TiB baseline and has a maximum IO bandwidth of 20 Gbit/s, while the peak IO bandwidth of our task requires at least hundreds of Gbit/s. Therefore, the traditional one cannot meet our requirements.</p>
</li>
<li>
<p><strong>Optimal Cost of Data Caching</strong>: Public cloud provides extreme elasticity of computing resources, which can create hundreds (or even thousands) of computing instances in a short time. However, when these computing resources access storage at the same time, the throughput needs to be hundreds of Gbit/s or more at peak hours. As such, it is necessary to serve hot data through the cache cluster in computing. However, in many time periods, the computing cluster will be scaled in to 0. At this time, it is not worth maintaining a large cache cluster. We prefer to warm up data before use and perform regular scale-in and scale-out according to the running rules of the business. When no jobs are running in the computing cluster, scale in to the default cache node to achieve dynamic Auto Scaling control of data cache throughput.</p>
</li>
</ol>
<p>To this end, <strong>we are eager to find software on Kubernetes that has elastic distributed cache acceleration capability and has good support for JuiceFS storage</strong>. We found that Fluid 1 works well with the JuiceFS storage, and the JuiceFS team happens to be the main contributor and maintainer of JuiceFSRuntime in the Fluid project. Therefore, we designed the architecture solution based on Fluid and chose the native JuiceFSRuntime.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/metabit-trading-arch-318881f64635761ad967360f15e3dcea.png" width="1080" height="790" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="an-introduction-to-architecture-components">An Introduction to Architecture Components<a href="#an-introduction-to-architecture-components" class="hash-link" aria-label="Direct link to An Introduction to Architecture Components" title="Direct link to An Introduction to Architecture Components">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fluid">Fluid<a href="#fluid" class="hash-link" aria-label="Direct link to Fluid" title="Direct link to Fluid">â€‹</a></h3>
<p>Fluid is different from the traditional storage-oriented PVC abstraction. Instead, it abstracts the process of <em>computing the data used by tasks</em> on Kubernetes. It puts forward the concept of an elastic Dataset, which is centered on the application&#x27;s demand for data access and gives features to the data, such as small files, read-only, and read-write. At the same time, extract data from the storage and give scopes to the data with features (such as the data that users only care about for a few days). Build a scheduling system centered on Dataset, focus on the orchestration of the data itself and the applications that use the data, and emphasize elasticity and lifecycle management.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/fluid-data-usage-bb0a892f54ed50bc54a7926328a4414b.png" width="910" height="308" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="juicefsruntime">JuiceFSRuntime<a href="#juicefsruntime" class="hash-link" aria-label="Direct link to JuiceFSRuntime" title="Direct link to JuiceFSRuntime">â€‹</a></h3>
<p>Based on the distributed cache acceleration engine of JuiceFS, JuiceFSRuntime combines the distributed data cache technology with the Auto Scaling, portability, observability, and scheduling capabilities of Fluid to support scenario-based data caching and acceleration. <strong>JuiceFSRuntime is easy to use and deploy on Fluid. It is compatible with the native Kubernetes environment and is out-of-the-box. It also integrates the storage features of JuiceFS to optimize data access performance in specific scenarios.</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reasons-to-use-juicefsruntime-based-fluid">Reasons to Use JuiceFSRuntime-Based Fluid<a href="#reasons-to-use-juicefsruntime-based-fluid" class="hash-link" aria-label="Direct link to Reasons to Use JuiceFSRuntime-Based Fluid" title="Direct link to Reasons to Use JuiceFSRuntime-Based Fluid">â€‹</a></h2>
<ol>
<li>
<p><strong>Dataset abstraction meets various requirements (such as performance optimization, isolation, and sharing) in cloud-native machine learning scenarios</strong>:</p>
<ul>
<li><strong>Scenario-Based Performance Tuning</strong>: Dataset allows you to optimize datasets with different access features. For example, model training scenarios are usually read-only, while feature computing requires read-write.</li>
<li><strong>Data Isolation</strong>: Dataset restricts access permissions of different teams to datasets in the cluster through the resource isolation mechanism of Kubernetes namespace. Different datasets correspond to different subdirectories in JuiceFS (JuiceFS Enterprise Edition also supports directory quotas), which can meet the requirements of data isolation.</li>
<li><strong>Data Cache Sharing</strong>: Fluid supports data access across Kubernetes namespaces for some public datasets frequently used by different teams, which can be cached once and shared by multiple teams. This also meets the requirements for data cache sharing.</li>
</ul>
</li>
<li>
<p><strong>Scenario-Based Optimization of Computing Resource of Runtime</strong>: Dataset is a general abstraction of data, and the actual operation of data is implemented by JuiceFSRuntime. Therefore, the resource configuration of Runtime (such as CPU, memory, network, and the number of cache workers) will affect the performance. Therefore, it is necessary to optimize the computing resources of Runtime according to the usage scenario of Dataset.</p>
</li>
<li>
<p><strong>Elastic Distributed Cache</strong>: Support a wide range of scale-in and scale-out policies (including manual scaling, auto scaling, and scheduled scaling). You can find the optimal elastic solution as needed.</p>
<ul>
<li><strong>Manual Scaling</strong>: The observability of Dataset allows you to understand the data amount of dataset and the cache resources required by the cache Runtime. You can set the number of Replicas (the number of cache workers) of Runtime based on the concurrency of application access and scale in during the idle time.</li>
<li><strong>Auto Scaling</strong>: Carry out Auto Scaling based on data metrics. For example, caching Auto Scaling can be carried out according to metrics (such as data cache volume and throughput). Automatic scale-out can be carried out when the cache percentage exceeds 80% or when the number of clients exceeds a certain threshold.</li>
<li><strong>Scheduled Scaling</strong>: You can set scheduled scaling based on the business features to implement unattended data elastic scaling.</li>
</ul>
</li>
<li>
<p><strong>Automatic Data Preheating</strong>: It can avoid data access competition caused by concurrently pulling data at the training time and cooperate with Auto Scaling to avoid premature creation of cache resources.</p>
</li>
<li>
<p><strong>Data-Aware Scheduling Capability</strong>: When an application is scheduled, Fluid provides the data cache location as scheduling information to the Kubernetes scheduler through JuiceFSRuntime to help the application schedule to cache nodes or nodes closer to the cache. The entire process is transparent to users, maximizing the benefits of data access performance.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-practice">Implementation Practice<a href="#implementation-practice" class="hash-link" aria-label="Direct link to Implementation Practice" title="Direct link to Implementation Practice">â€‹</a></h2>
<p>According to practice, we have summarized the following experience for your reference.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="select-ecs-with-large-memory-and-io-with-high-network-as-cache-nodes-in-juicefsruntime-of-fluid">Select ECS with Large Memory and IO with High Network as Cache Nodes in JuiceFSRuntime of Fluid<a href="#select-ecs-with-large-memory-and-io-with-high-network-as-cache-nodes-in-juicefsruntime-of-fluid" class="hash-link" aria-label="Direct link to Select ECS with Large Memory and IO with High Network as Cache Nodes in JuiceFSRuntime of Fluid" title="Direct link to Select ECS with Large Memory and IO with High Network as Cache Nodes in JuiceFSRuntime of Fluid">â€‹</a></h3>
<p>With the continuous improvement of ECS network capability, the capability of the current network bandwidth has far exceeded the IO capability of SSD. Take ECS of the ecs.g7.8xlarge specification on Alibaba Cloud as an example: its peak bandwidth is 25 Gbit/s, and its memory is 128 GiB. In theory, it only takes 13s to read 40 GB of data. Our data is stored in JuiceFS. Therefore, to realize large-scale data reading, we need to load the data to the computing nodes in the VPC network where the computing happens. Here is a specific example that we used. In order to speed up data reading, we configure the cache node to choose memory for data caching. Note:</p>
<ul>
<li>Worker is mainly responsible for distributed data caching. We can configure a model with relatively high memory performance for Worker to speed up data reading. The scheduling policy of Worker is configured in Dataset. Therefore, you need to configure an affinity policy for Worker in Dataset.</li>
<li>In order to ensure that AutoScaler of Cluster scale out successfully, it is recommended to select multiple instance types in configuring affinity to ensure successful scale-out and task execution when a task has no specific model requirements.</li>
<li>Replicas is the initial number of cache workers, which can achieve scale-in and scale-out later through manual triggering or auto scaling.</li>
<li>After you specify tieredstore, it is unnecessary to set the memory of the request in the Pod of Kubernetes. Fluid can handle it automatically.</li>
<li>For example, the JuiceFS mount on the cache node has different configurations (such as the cache size and mount path), which can be overwritten by options in worker.</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metabit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">juice</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">research</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metabit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">juice</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">research</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> juicefs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">///</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">metacache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">cache-group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;research-groups&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">encryptOptions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> juicefs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> access</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> juicefs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> access</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> juicefs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeAffinity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">required</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">nodeSelectorTerms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node.kubernetes.io/instance</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ecs.g7.8xlarge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ecs.g7.16xlarge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">-key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jfs_transmittion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JuiceFSRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metabit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">juice</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">research</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tieredstore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">levels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mediumtype</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MEM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">quota</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40960</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">low</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">nodeSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">nodeType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cacheNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">cache-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">409600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token key atrule" style="color:#00a4db">free-space-ratio</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &quot;0.15â€œ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-auto-scaling-policies">Configuring Auto Scaling Policies<a href="#configuring-auto-scaling-policies" class="hash-link" aria-label="Direct link to Configuring Auto Scaling Policies" title="Direct link to Configuring Auto Scaling Policies">â€‹</a></h3>
<p>Due to the business type, Metabit has higher usage requirements in a fixed period. Therefore, an Auto Scaling policy that configures scheduled cache nodes can achieve good benefits (such as cost control and performance improvement).</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> autoscaling.alibabacloud.com/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CronHorizontalPodAutoscaler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> research</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">weekly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">scaleTargetRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JuiceFSRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metabit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">juice</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">research</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;scale-down&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">schedule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0 0 7 ? * 1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">targetSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;scale-up&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">schedule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0 0 18 ? * 5-6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">targetSize</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Furthermore, if specific metrics in the business (such as cache ratio threshold and IO throughput) trigger Auto Scaling policies with complex custom rules, a more flexible scaling configuration of cache nodes can be achieved, thus achieving higher and more stable performance. Specifically, there are some advantages in terms of flexibility and performance:</p>
<ul>
<li>It is unnecessary to accurately detect the bottom data or have fixed scaling rules. You can adaptively configure the upper and lower limits of cache replicas based on the cluster status.</li>
<li>Stepwise scale-out avoids creating too many ECS instances at the beginning to avoid waste in spending.</li>
<li>Avoid bandwidth preemption caused by explosive ECS accessing to JuiceFS data.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trigger-data-preheating">Trigger Data Preheating<a href="#trigger-data-preheating" class="hash-link" aria-label="Direct link to Trigger Data Preheating" title="Direct link to Trigger Data Preheating">â€‹</a></h3>
<p>Increase the cache ratio through data preheating and then trigger auto scaling. At the same time, monitor the cache ratio. When the cache ratio reaches a certain threshold, it starts to trigger task delivery to avoid the IO latency caused by the premature delivery of highly concurrent tasks.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="image-embedding">Image Embedding<a href="#image-embedding" class="hash-link" aria-label="Direct link to Image Embedding" title="Direct link to Image Embedding">â€‹</a></h3>
<p>Due to the large scale of computing and data elasticity used by Metabit Trading, a large number of Pods pop up in an instant, resulting in image download throttling. Network bandwidth resources are scarce during pod pull-up. In order to avoid various problems caused by the latency in pulling up container images during pod creation, we recommend that ECS images be customized, and the required systematic images be buried to reduce the time cost of pod pull-up. Please refer to the base image of <a href="https://www.aliyun.com/product/kubernetes" target="_blank" rel="noopener noreferrer">ACK</a> for specific examples.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance-and-cost-benefits-from-increased-elastic-throughput">Performance and Cost Benefits from Increased Elastic Throughput<a href="#performance-and-cost-benefits-from-increased-elastic-throughput" class="hash-link" aria-label="Direct link to Performance and Cost Benefits from Increased Elastic Throughput" title="Direct link to Performance and Cost Benefits from Increased Elastic Throughput">â€‹</a></h2>
<p>In the actual deployment evaluation, we use 20 ECS instances of ecs.g7.8xlarge specifications as worker nodes to build a JuiceFSRuntime cluster. The maximum bandwidth of a single ECS node is 25 Gbit/s. We use memory to cache data and speed up data reading.</p>
<p>For comparison, we counted the access time data and compared it with the access time by using Fluid. The data is shown in the following figure:</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="503" height="259" class="img_ev3q"></p>
<p>When the number of Pods that are started simultaneously is small, Fluid has no significant advantage over distributed storage. However, when more Pods are started at the same time, Fluid has a greater acceleration advantage. When the concurrency is expanded to 100 Pods at the same time, Fluid can reduce the average time consumption by more than 40% compared with traditional distributed storage. On the one hand, it improves task speed. On the other hand, it saves the cost of ECS due to IO latency.</p>
<p>More importantly, the data read bandwidth of the entire Fluid system is positively correlated with the size of the JuiceFSRuntime cluster. If we need to scale more Pods out at the same time, we can modify the Replicas of JuiceFSRuntime to increase the data bandwidth. This dynamic scaling capability is unavailable for distributed storage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="outlook">Outlook<a href="#outlook" class="hash-link" aria-label="Direct link to Outlook" title="Direct link to Outlook">â€‹</a></h2>
<p>Metabit has taken a solid first step in the practice of Fluid. We are also thinking about how to use this continuously innovating and outputting technology framework to exert its complete functions in more suitable scenarios. This is a summary of some of our small observations. It serves as a catalyst for further discussion.</p>
<ol>
<li>
<p><strong>Serverless can provide better elasticity</strong>: Currently, we use custom images to improve the elasticity efficiency of application containers and Fluid components. We also find that using Fluid on ECI can provide more efficient and simple application extension elasticity while reducing O&amp;M complexity. This is a direction worth exploring in practice.</p>
</li>
<li>
<p><strong>Collaboration between Task Elasticity and Data Cache Elasticity</strong>: The business system understands the number of concurrent tasks that use the same dataset over a period and performs data preheating and elastic scaling during task queuing. Correspondingly, when the data cache or data access throughput meets certain conditions, the queued tasks are triggered from waiting to being available.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary-and-acknowledgements">Summary and Acknowledgements<a href="#summary-and-acknowledgements" class="hash-link" aria-label="Direct link to Summary and Acknowledgements" title="Direct link to Summary and Acknowledgements">â€‹</a></h2>
<p>Metabit Trading has been using Fluid in the production environment for nearly a year and a half, including JindoRuntime and JuiceFSRuntime. Currently, it realizes efficient large-scale quantitative research through JuiceFSRuntime. Fluid delivers the benefits of simplicity, stability, reliability, multiple runtimes, easy maintenance, and transparency to quantitative researchers.</p>
<p>The large-scale practice of Metabit Trading has helped our team build a good understanding of using public clouds. In scenarios of machine learning and big data, elasticity is necessary for computing resources and its corresponding data access throughput. It is difficult for traditional storage-side caches to meet the needs of current scenarios due to the differences in cost, flexibility, and on-demand elasticity, while the concept and implementation of computing-side elastic data caching of Fluid are more suitable in current scenarios.</p>
<p>Special thanks to Weiwei Zhu (of JuiceData) and Yang Che, Zhihao Xu, and Rong Gu (of Fluid Community) for their continuous support. Thanks to their maintenance, there is active discussion and quick response in the community, which plays a key role in our smooth adoption.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-author">About the Author<a href="#about-the-author" class="hash-link" aria-label="Direct link to About the Author" title="Direct link to About the Author">â€‹</a></h2>
<p>Zhiyi Li (Metabit Trading - AI Platform Engineer) is a builder, cloud-native technology learner, and former Senior Engineer of Citadel.</p>
<p>Jianhong Li (Metabit Trading - Engineering Manager of AI Platform) focuses on building machine learning platforms and high-performance computing platforms in the quantitative research field. He was a Senior Engineer at Facebook.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fluid-cloudnative/fluid-cloudnative.github.io/tree/master/docs/case-study/metabit-trading-case-study.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-04-09T11:19:23.000Z">Apr 9, 2024</time></b> by <b>ZhangXiaozheng</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/case-study/weibo-case-study"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Weibo&#x27;s Case Study</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/case-study/metabit-trading-study"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Metabit Trading&#x27;s Case Study</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-detailed-explanation-of-quantitative-research" class="table-of-contents__link toc-highlight">A Detailed Explanation of Quantitative Research</a></li><li><a href="#requirements-for-quantitative-research-basic-platform" class="table-of-contents__link toc-highlight">Requirements for Quantitative Research Basic Platform</a></li><li><a href="#fluid--juicefsruntime-provide-efficient-support-for-quantitative-research-basic-platform-on-the-cloud" class="table-of-contents__link toc-highlight">Fluid + JuiceFSRuntime: Provide Efficient Support for Quantitative Research Basic Platform on the Cloud</a></li><li><a href="#an-introduction-to-architecture-components" class="table-of-contents__link toc-highlight">An Introduction to Architecture Components</a><ul><li><a href="#fluid" class="table-of-contents__link toc-highlight">Fluid</a></li><li><a href="#juicefsruntime" class="table-of-contents__link toc-highlight">JuiceFSRuntime</a></li></ul></li><li><a href="#reasons-to-use-juicefsruntime-based-fluid" class="table-of-contents__link toc-highlight">Reasons to Use JuiceFSRuntime-Based Fluid</a></li><li><a href="#implementation-practice" class="table-of-contents__link toc-highlight">Implementation Practice</a><ul><li><a href="#select-ecs-with-large-memory-and-io-with-high-network-as-cache-nodes-in-juicefsruntime-of-fluid" class="table-of-contents__link toc-highlight">Select ECS with Large Memory and IO with High Network as Cache Nodes in JuiceFSRuntime of Fluid</a></li><li><a href="#configuring-auto-scaling-policies" class="table-of-contents__link toc-highlight">Configuring Auto Scaling Policies</a></li><li><a href="#trigger-data-preheating" class="table-of-contents__link toc-highlight">Trigger Data Preheating</a></li><li><a href="#image-embedding" class="table-of-contents__link toc-highlight">Image Embedding</a></li></ul></li><li><a href="#performance-and-cost-benefits-from-increased-elastic-throughput" class="table-of-contents__link toc-highlight">Performance and Cost Benefits from Increased Elastic Throughput</a></li><li><a href="#outlook" class="table-of-contents__link toc-highlight">Outlook</a></li><li><a href="#summary-and-acknowledgements" class="table-of-contents__link toc-highlight">Summary and Acknowledgements</a></li><li><a href="#about-the-author" class="table-of-contents__link toc-highlight">About the Author</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.slack.com/client/T08PSQ7BQ/C02ADG209SP" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack (#fluid channel)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community/meeting_schedule">DingTalk (GroupID: 32850151)</a></li><li class="footer__item"><a class="footer__link-item" href="/community/meeting_schedule">Meeting</a></li><li class="footer__item"><a href="https://github.com/fluid-cloudnative/fluid/blob/master/README.md#community" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 The Fluid Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: 
        https://www.linuxfoundation.org/trademark-usage</div></div></div></footer></div>
</body>
</html>