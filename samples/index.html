<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DEMO - Speed Up Accessing Remote Files | Fluid</title>
    <meta name="generator" content="VuePress 1.8.3">
    <link rel="icon" href="/fluid-stacked-color.svg">
    <meta name="description" content="Fluid, elastic data abstraction and acceleration for BigData/AI applications in cloud.">
    
    <link rel="preload" href="/assets/css/0.styles.a3f68dae.css" as="style"><link rel="preload" href="/assets/js/app.1a248f63.js" as="script"><link rel="preload" href="/assets/js/2.886cbf07.js" as="script"><link rel="preload" href="/assets/js/3.43a2579f.js" as="script"><link rel="preload" href="/assets/js/35.5fc9f29a.js" as="script"><link rel="prefetch" href="/assets/js/10.94391121.js"><link rel="prefetch" href="/assets/js/11.2e246630.js"><link rel="prefetch" href="/assets/js/12.e279f2da.js"><link rel="prefetch" href="/assets/js/13.ab71c8d2.js"><link rel="prefetch" href="/assets/js/14.cf38dbc1.js"><link rel="prefetch" href="/assets/js/15.31431f01.js"><link rel="prefetch" href="/assets/js/16.14e6e051.js"><link rel="prefetch" href="/assets/js/17.bc4c1069.js"><link rel="prefetch" href="/assets/js/18.07ff94e3.js"><link rel="prefetch" href="/assets/js/19.8530dd76.js"><link rel="prefetch" href="/assets/js/20.c1e88fd6.js"><link rel="prefetch" href="/assets/js/21.a0a61ebc.js"><link rel="prefetch" href="/assets/js/22.313d158a.js"><link rel="prefetch" href="/assets/js/23.1f8eaab5.js"><link rel="prefetch" href="/assets/js/24.8f970c3d.js"><link rel="prefetch" href="/assets/js/25.7ac77a32.js"><link rel="prefetch" href="/assets/js/26.dc6dff7d.js"><link rel="prefetch" href="/assets/js/27.d69231a7.js"><link rel="prefetch" href="/assets/js/28.e3593986.js"><link rel="prefetch" href="/assets/js/29.5002463d.js"><link rel="prefetch" href="/assets/js/30.f7ff8430.js"><link rel="prefetch" href="/assets/js/31.97b5728d.js"><link rel="prefetch" href="/assets/js/32.81b30f99.js"><link rel="prefetch" href="/assets/js/33.25d26f04.js"><link rel="prefetch" href="/assets/js/34.c9c3cc5e.js"><link rel="prefetch" href="/assets/js/36.ffb7abe5.js"><link rel="prefetch" href="/assets/js/37.13c16716.js"><link rel="prefetch" href="/assets/js/38.24c89d55.js"><link rel="prefetch" href="/assets/js/39.b0fd1215.js"><link rel="prefetch" href="/assets/js/4.ea15b34c.js"><link rel="prefetch" href="/assets/js/40.8f5f59de.js"><link rel="prefetch" href="/assets/js/41.9f68f364.js"><link rel="prefetch" href="/assets/js/42.79638655.js"><link rel="prefetch" href="/assets/js/43.f9b6d36b.js"><link rel="prefetch" href="/assets/js/44.0e8467e5.js"><link rel="prefetch" href="/assets/js/45.f67562e2.js"><link rel="prefetch" href="/assets/js/46.88cff5c6.js"><link rel="prefetch" href="/assets/js/47.80aefc08.js"><link rel="prefetch" href="/assets/js/48.e3092c62.js"><link rel="prefetch" href="/assets/js/49.76c3e272.js"><link rel="prefetch" href="/assets/js/5.c0ae63ef.js"><link rel="prefetch" href="/assets/js/50.5d96c40b.js"><link rel="prefetch" href="/assets/js/51.3e27f7a5.js"><link rel="prefetch" href="/assets/js/52.8de8971b.js"><link rel="prefetch" href="/assets/js/53.05533a1a.js"><link rel="prefetch" href="/assets/js/54.321af728.js"><link rel="prefetch" href="/assets/js/55.a5d8c25e.js"><link rel="prefetch" href="/assets/js/56.3ba55caf.js"><link rel="prefetch" href="/assets/js/57.aacfd70e.js"><link rel="prefetch" href="/assets/js/58.c487aa58.js"><link rel="prefetch" href="/assets/js/59.3b055bc6.js"><link rel="prefetch" href="/assets/js/6.616cc39d.js"><link rel="prefetch" href="/assets/js/60.378aa390.js"><link rel="prefetch" href="/assets/js/61.0a2e334b.js"><link rel="prefetch" href="/assets/js/62.23643dbb.js"><link rel="prefetch" href="/assets/js/63.5baf4996.js"><link rel="prefetch" href="/assets/js/64.4ff83929.js"><link rel="prefetch" href="/assets/js/65.1f0b8f51.js"><link rel="prefetch" href="/assets/js/66.3497b1e9.js"><link rel="prefetch" href="/assets/js/67.f4a5ac96.js"><link rel="prefetch" href="/assets/js/68.dc86e693.js"><link rel="prefetch" href="/assets/js/69.313ff3e7.js"><link rel="prefetch" href="/assets/js/7.630e9efa.js"><link rel="prefetch" href="/assets/js/70.9e3d9d30.js"><link rel="prefetch" href="/assets/js/71.7910dd58.js"><link rel="prefetch" href="/assets/js/72.14aa7b61.js"><link rel="prefetch" href="/assets/js/73.c22e91d6.js"><link rel="prefetch" href="/assets/js/74.1682a99e.js"><link rel="prefetch" href="/assets/js/75.fd23650c.js"><link rel="prefetch" href="/assets/js/76.c3f86160.js"><link rel="prefetch" href="/assets/js/77.3dcf2c03.js"><link rel="prefetch" href="/assets/js/78.4d6170a3.js"><link rel="prefetch" href="/assets/js/79.b7a876cd.js"><link rel="prefetch" href="/assets/js/8.34aeb8f3.js"><link rel="prefetch" href="/assets/js/80.a12a06af.js"><link rel="prefetch" href="/assets/js/81.58cc0eac.js"><link rel="prefetch" href="/assets/js/82.2105f26b.js"><link rel="prefetch" href="/assets/js/83.b5f52be7.js"><link rel="prefetch" href="/assets/js/84.0f048ebd.js"><link rel="prefetch" href="/assets/js/85.a6e08bb2.js"><link rel="prefetch" href="/assets/js/86.5a7e0f02.js"><link rel="prefetch" href="/assets/js/87.1f8e757e.js"><link rel="prefetch" href="/assets/js/88.9bc6bb52.js"><link rel="prefetch" href="/assets/js/89.7a744324.js"><link rel="prefetch" href="/assets/js/9.f5329c38.js"><link rel="prefetch" href="/assets/js/90.21598d60.js"><link rel="prefetch" href="/assets/js/91.df98fffb.js"><link rel="prefetch" href="/assets/js/92.14b0e459.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a3f68dae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/fluid-horizontal-color.png" alt="Fluid" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/samples/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/samples/" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/samples/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/samples/" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/samples/" aria-current="page" class="active sidebar-link">DEMO - Speed Up Accessing Remote Files</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/samples/#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/samples/#set-up-workspace" class="sidebar-link">Set Up Workspace</a></li><li class="sidebar-sub-header"><a href="/samples/#install-resources-to-kubernetes" class="sidebar-link">Install Resources to Kubernetes</a></li><li class="sidebar-sub-header"><a href="/samples/#remote-file-access" class="sidebar-link">Remote File Access</a></li><li class="sidebar-sub-header"><a href="/samples/#speed-up-accessing-remote-files" class="sidebar-link">Speed Up Accessing Remote Files</a></li><li class="sidebar-sub-header"><a href="/samples/#clean-up" class="sidebar-link">Clean Up</a></li></ul></li><li><a href="/samples/accelerate_pvc.html" class="sidebar-link">DEMO - Accelerate PVC with Fluid</a></li><li><a href="/samples/machinelearning.html" class="sidebar-link">DEMO - Accelerate Machine Learning Training with Fluid</a></li><li><a href="/samples/data_warmup.html" class="sidebar-link">Demo - Data Preloading</a></li><li><a href="/samples/accelerate_hdfs.html" class="sidebar-link">DEMO - Speed Up Accessing HDFS Client Files</a></li><li><a href="/samples/accelerate_s3_minio.html" class="sidebar-link">DEMO - Speed Up Accessing Minio Files</a></li><li><a href="/samples/data_co_locality.html" class="sidebar-link">DEMO - Cache Co-locality for Workload Scheduling</a></li><li><a href="/samples/multi_dataset_same_node_accessing.html" class="sidebar-link">DEMO - Single-Machine Multiple-Dataset Speed Up Accessing Remote Files</a></li><li><a href="/samples/nonroot_access.html" class="sidebar-link">Example - Using Fluid to access non-root user's data</a></li><li><a href="/samples/tieredstore_config.html" class="sidebar-link">Demo - Alluxio Tieredstore Configuration</a></li><li><a href="/samples/use_encryptoptions.html" class="sidebar-link">DEMO - Use Secret to configure Dataset sensitive information</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="demo-speed-up-accessing-remote-files"><a href="#demo-speed-up-accessing-remote-files" class="header-anchor">#</a> DEMO - Speed Up Accessing Remote Files</h1> <p><a href="https://fluid-imgs.oss-cn-shanghai.aliyuncs.com/public/video/remote-file-accessing.mp4" target="_blank" rel="noopener noreferrer"><img src="https://fluid-imgs.oss-cn-shanghai.aliyuncs.com/public/imgs/remoteData_demo.png" alt=""><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Powered by <a href="https://www.alluxio.io" target="_blank" rel="noopener noreferrer">Alluxio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/libfuse/libfuse" target="_blank" rel="noopener noreferrer">Fuse<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, Fluid provides a simple way for users to access files stored in remote filesystems, just like accessing some ordinary file in local filesystems.
What's more, with a powerful caching capability provided, users can enjoy a great speedup on accessing remote files especially for those that have a frequent access pattern.</p> <p>This demo aims to show you an overview of all the features mentioned above.</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>Before everything we are going to do, please refer to <a href="/guide/get_started.html">Installation Guide</a> to install Fluid on your Kubernetes Cluster, and make sure all the components used by Fluid are ready like this:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pod <span class="token parameter variable">-n</span> fluid-system
NAME                                  READY   STATUS    RESTARTS   AGE
alluxioruntime-controller-5b64fdbbb-84pc6   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8h
csi-nodeplugin-fluid-fwgjh                  <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8h
csi-nodeplugin-fluid-ll8bq                  <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8h
dataset-controller-5b7848dbbb-n44dj         <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8h
</code></pre></div><p>Normally, you shall see a Pod named &quot;controller-manager&quot; and several Pods named &quot;csi-nodeplugin&quot;.
The num of &quot;csi-nodeplugin&quot; Pods depends on how many nodes your Kubernetes cluster have(e.g. 2 in this demo), so please make sure all &quot;csi-nodeplugin&quot; Pods are working properly.</p> <h2 id="set-up-workspace"><a href="#set-up-workspace" class="header-anchor">#</a> Set Up Workspace</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">mkdir</span> <span class="token operator">&lt;</span>any-path<span class="token operator">&gt;</span>/accelerate
$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>any-path<span class="token operator">&gt;</span>/accelerate
</code></pre></div><h2 id="install-resources-to-kubernetes"><a href="#install-resources-to-kubernetes" class="header-anchor">#</a> Install Resources to Kubernetes</h2> <p><strong>Check the <code>Dataset</code> object to be created</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ cat<span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span>dataset.yaml</span>
apiVersion: data.fluid.io/v1alpha1
kind: Dataset
metadata:
  name: hbase
spec:
  mounts:
    - mountPoint: https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/stable/
      name: hbase
EOF</span>
</code></pre></div><blockquote><p>Notes: Here, we use THU's tuna Apache mirror site as our <code>mountPoint</code>. If your environment isn't in Chinese mainland, please replace it with <code>https://downloads.apache.org/hbase/stable/</code>.</p></blockquote> <p>Here, we'd like to create a resource object with kind <code>Dataset</code>. <code>Dataset</code> is a Custom Resource Definition(CRD) defined by Fluid and used to tell Fluid where to find all the data you'd like to access.
Under the hood, Fluid uses Alluxio to do some mount operations, so <code>mountPoint</code> property can be any legal UFS path acknowledged by Alluxio. Here, we use <a href="https://docs.alluxio.io/os/user/stable/en/ufs/WEB.html" target="_blank" rel="noopener noreferrer">WebUFS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for its simplicity.</p> <p>For more information about UFS, please refer to <a href="https://docs.alluxio.io/os/user/stable/en/ufs/HDFS.html" target="_blank" rel="noopener noreferrer">Alluxio Docs - Storage Integrations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>For more information about properties in <code>Dataset</code>, please refer to our <a href="/dev/api_doc.html">API doc</a></p> <blockquote><p>We use hbase v2.2.5 on a mirror site of Apache downloads as an example of remote file. It's nothing special, you can change it to any remote file you like. But please note that, if you are going to use WebUFS like we do, files on Apache sites are highly recommended because you might need some <a href="https://docs.alluxio.io/os/user/stable/en/ufs/WEB.html#configuring-alluxio" target="_blank" rel="noopener noreferrer">advanced configurations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> due to current implementation of WebUFS.</p></blockquote> <p><strong>Create the <code>Dataset</code> object</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl create <span class="token parameter variable">-f</span> dataset.yaml
dataset.data.fluid.io/hbase created
</code></pre></div><p><strong>Check status of the <code>Dataset</code> object</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get dataset hbase
NAME    UFS TOTAL SIZE   CACHED   CACHE CAPACITY   CACHED PERCENTAGE   PHASE      AGE
hbase                                                                  NotBound   13s
</code></pre></div><p>With a <code>NotBound</code> phase in status, the dataset is not ready cause there isn't any <code>AlluxioRuntime</code> object supporting it. We'll create one in the following steps.</p> <p><strong>Check the <code>AlluxioRuntime</code> object to be created</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ cat<span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span>runtime.yaml</span>
apiVersion: data.fluid.io/v1alpha1
kind: AlluxioRuntime
metadata:
  name: hbase
spec:
  replicas: 2
  tieredstore:
    levels:
      - mediumtype: MEM
        path: /dev/shm
        quota: 2Gi
        high: &quot;0.95&quot;
        low: &quot;0.7&quot;
  properties:
    alluxio.user.block.size.bytes.default: 256MB
    alluxio.user.streaming.reader.chunk.size.bytes: 256MB
    alluxio.user.local.reader.chunk.size.bytes: 256MB
    alluxio.worker.network.reader.buffer.size: 256MB
    alluxio.user.streaming.data.timeout: 300sec
  fuse:
    args:
      - fuse
      - --fuse-opts=kernel_cache,ro,max_read=131072,attr_timeout=7200,entry_timeout=7200,nonempty,max_readahead=0
EOF</span>
</code></pre></div><p><strong>Create a <code>AlluxioRuntime</code> object</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl create <span class="token parameter variable">-f</span> runtime.yaml
alluxioruntime.data.fluid.io/hbase created
</code></pre></div><p><strong>Get the <code>AlluxioRuntime</code> object</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get alluxioruntime
NAME    AGE
hbase   55s
</code></pre></div><p><code>AlluxioRuntime</code> is another CRD defined by Fluid. An <code>AluxioRuntime</code> object describes specifications used to run an Alluxio instance.</p> <p>Wait for a while, and make sure all components defined in the <code>AlluxioRuntime</code> object are ready. You shall see something like this:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pod
NAME                 READY   STATUS    RESTARTS   AGE
hbase-fuse-hvxgh     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          27s
hbase-fuse-sjhxk     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          27s
hbase-master-0       <span class="token number">2</span>/2     Running   <span class="token number">0</span>          62s
hbase-worker-92cln   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          27s
hbase-worker-rlb5w   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          27s
</code></pre></div><p><strong>Check status of the <code>Dataset</code> object again</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get dataset hbase
NAME    UFS TOTAL SIZE   CACHED   CACHE CAPACITY   CACHED PERCENTAGE   PHASE   AGE
hbase   <span class="token number">443</span>.5MiB         0B       4GiB             <span class="token number">0</span>%                  Bound   2m39s
</code></pre></div><p><code>Dataset</code> object has been updated since a related Alluxio instance is ready and successfully bounded to the <code>Dataset</code> object.</p> <p><strong>Check status of the <code>AlluxioRuntime</code> object</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get alluxioruntime hbase <span class="token parameter variable">-o</span> wide
NAME    READY MASTERS   DESIRED MASTERS   MASTER PHASE   READY WORKERS   DESIRED WORKERS   WORKER PHASE   READY FUSES   DESIRED FUSES   FUSE PHASE   AGE
hbase   <span class="token number">1</span>               <span class="token number">1</span>                 Ready          <span class="token number">2</span>               <span class="token number">2</span>                 Ready          <span class="token number">2</span>             <span class="token number">2</span>               Ready        2m50s
</code></pre></div><p>Detailed information about the Alluxio instance is provided here.</p> <p><strong>Check related PersistentVolume and PersistentVolumeClaim</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get <span class="token function">pv</span>
NAME    CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM           STORAGECLASS   REASON   AGE
hbase   100Gi      RWX            Retain           Bound    default/hbase                           18m
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pvc
NAME    STATUS   VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE
hbase   Bound    hbase    100Gi      RWX                           18m
</code></pre></div><p>Related PV and PVC have been created by Fluid since the <code>Dataset</code> object is ready(bounded).
Workloads are now able to access remote files by mounting PVC.</p> <h2 id="remote-file-access"><a href="#remote-file-access" class="header-anchor">#</a> Remote File Access</h2> <p><strong>Check the app to be created</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ cat<span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span>nginx.yaml</span>
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
    - name: nginx
      image: nginx
      volumeMounts:
        - mountPath: /data
          name: hbase-vol
  volumes:
    - name: hbase-vol
      persistentVolumeClaim:
        claimName: hbase
EOF</span>
</code></pre></div><p><strong>Run a demo app to access remote files</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl create <span class="token parameter variable">-f</span> nginx.yaml
</code></pre></div><p>Login to nginx Pod:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> nginx -- <span class="token function">bash</span>
</code></pre></div><p>Check file status:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-1</span> /data/hbase
CHANGES.md
RELEASENOTES.md
api_compare_2.2.5RC0_to_2.2.4.html
hbase-2.2.5-bin.tar.gz
hbase-2.2.5-client-bin.tar.gz
hbase-2.2.5-src.tar.gz
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">du</span> <span class="token parameter variable">-h</span> /data/hbase/*
174K    /data/hbase/CHANGES.md
106K    /data/hbase/RELEASENOTES.md
115K    /data/hbase/api_compare_2.2.5RC0_to_2.2.4.html
211M    /data/hbase/hbase-2.2.5-bin.tar.gz
<span class="token number">1</span>.0K    /data/hbase/hbase-2.2.5-bin.tar.gz.asc
<span class="token number">512</span>     /data/hbase/hbase-2.2.5-bin.tar.gz.sha512
200M    /data/hbase/hbase-2.2.5-client-bin.tar.gz
<span class="token number">1</span>.0K    /data/hbase/hbase-2.2.5-client-bin.tar.gz.asc
<span class="token number">512</span>     /data/hbase/hbase-2.2.5-client-bin.tar.gz.sha512
34M     /data/hbase/hbase-2.2.5-src.tar.gz
<span class="token number">1</span>.0K    /data/hbase/hbase-2.2.5-src.tar.gz.asc
<span class="token number">512</span>     /data/hbase/hbase-2.2.5-src.tar.gz.sha512
</code></pre></div><p>Logout:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token builtin class-name">exit</span>
</code></pre></div><p>As you may have seen, all the files on the WebUFS(e.g. hbase-related files on Apache mirror in our case) appear no differences from any other file in the local filesystem of the nginx Pod.</p> <h2 id="speed-up-accessing-remote-files"><a href="#speed-up-accessing-remote-files" class="header-anchor">#</a> Speed Up Accessing Remote Files</h2> <p>To demonstrate how great speedup you may enjoy when accessing remote files, here is a demo job:</p> <p><strong>Check the test job to be launched</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ cat<span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span>app.yaml</span>
apiVersion: batch/v1
kind: Job
metadata:
  name: fluid-copy-test
spec:
  template:
    spec:
      restartPolicy: OnFailure
      containers:
        - name: busybox
          image: busybox
          command: [&quot;/bin/sh&quot;]
          args: [&quot;-c&quot;, &quot;set -x; time cp -r /data/hbase ./&quot;]
          volumeMounts:
            - mountPath: /data
              name: hbase-vol
      volumes:
        - name: hbase-vol
          persistentVolumeClaim:
            claimName: hbase
EOF</span>
</code></pre></div><p><strong>Launch a test job</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl create <span class="token parameter variable">-f</span> app.yaml
job.batch/fluid-test created
</code></pre></div><p>Under the hood, the test job executes a shell command <code>time cp -r /data/hbase ./</code> and prints its result.
Wait for a while and make sure the job has completed. You can check its runnning status by:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pod
NAME                    READY   STATUS      RESTARTS   AGE
fluid-copy-test-h59w9   <span class="token number">0</span>/1     Completed   <span class="token number">0</span>          1m25s
<span class="token punctuation">..</span>.
</code></pre></div><blockquote><p>Note: the <code>h59w9</code> in <code>fluid-copy-test-h59w9</code> is a specifier generated by the Job we created. It's highly possible that you may have different specifier in your environment. Please remember replace it with your own specifier in the following steps</p></blockquote> <p><strong>Check running time of the test job</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl logs fluid-copy-test-h59w9
+ <span class="token function">time</span> <span class="token function">cp</span> <span class="token parameter variable">-r</span> /data/hbase ./
real  1m <span class="token number">2</span>.74s
user  0m <span class="token number">0</span>.00s
sys   0m <span class="token number">1</span>.35s
</code></pre></div><p>It's our first time to read such a file, and it takes us about 63s. It may be not as fast as you expected but:</p> <p><strong>Check status of the dataset</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get dataset hbase
NAME    UFS TOTAL SIZE   CACHED     CACHE CAPACITY   CACHED PERCENTAGE   PHASE   AGE
hbase   <span class="token number">443</span>.5MiB         <span class="token number">443</span>.5MiB   4GiB             <span class="token number">100</span>%                Bound   9m27s
</code></pre></div><p>Now, all the remote files have been cached in Alluxio.</p> <p><strong>Re-Launch the test job</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl delete <span class="token parameter variable">-f</span> app.yaml
$ kubectl create <span class="token parameter variable">-f</span> app.yaml
</code></pre></div><p>It'll finish very soon after creation this time:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pod
NAME                    READY   STATUS      RESTARTS   AGE
fluid-copy-test-d9h2x   <span class="token number">0</span>/1     Completed   <span class="token number">0</span>          24s
<span class="token punctuation">..</span>.
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl logs fluid-copy-test-d9h2x
+ <span class="token function">time</span> <span class="token function">cp</span> <span class="token parameter variable">-r</span> /data/hbase ./
real  0m <span class="token number">2</span>.94s
user  0m <span class="token number">0</span>.00s
sys   0m <span class="token number">1</span>.27s
</code></pre></div><p>The same read operation takes only 3s this time.</p> <p>The great speedup attributes to the powerful caching capability provided by Alluxio. That means that once you access some remote file, it will be cached in Alluxio, and your next following operations will enjoy a local access instead of a remote one, and thus a great speedup.</p> <blockquote><p>Note: Time spent for the test job depends on your network environment. If it takes too long for you to complete the job, changing a mirror or some smaller file might help.</p></blockquote> <h2 id="clean-up"><a href="#clean-up" class="header-anchor">#</a> Clean Up</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl delete <span class="token parameter variable">-f</span> <span class="token builtin class-name">.</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/samples/accelerate_pvc.html">
        DEMO - Accelerate PVC with Fluid
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1a248f63.js" defer></script><script src="/assets/js/2.886cbf07.js" defer></script><script src="/assets/js/3.43a2579f.js" defer></script><script src="/assets/js/35.5fc9f29a.js" defer></script>
  </body>
</html>
