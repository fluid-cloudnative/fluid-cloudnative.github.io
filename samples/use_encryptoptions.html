<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DEMO - Use Secret to configure Dataset sensitive information | Fluid</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/fluid-stacked-color.svg">
    <meta name="description" content="Fluid, elastic data abstraction and acceleration for BigData/AI applications in cloud.">
    
    <link rel="preload" href="/assets/css/0.styles.e6685ce7.css" as="style"><link rel="preload" href="/assets/js/app.da58bb20.js" as="script"><link rel="preload" href="/assets/js/2.81b06f56.js" as="script"><link rel="preload" href="/assets/js/45.113b6e73.js" as="script"><link rel="prefetch" href="/assets/js/10.a7a7f143.js"><link rel="prefetch" href="/assets/js/11.1b4f7b93.js"><link rel="prefetch" href="/assets/js/12.02744490.js"><link rel="prefetch" href="/assets/js/13.171830f3.js"><link rel="prefetch" href="/assets/js/14.bdf00a75.js"><link rel="prefetch" href="/assets/js/15.0c30f930.js"><link rel="prefetch" href="/assets/js/16.a26f5dac.js"><link rel="prefetch" href="/assets/js/17.ea406e20.js"><link rel="prefetch" href="/assets/js/18.756a9497.js"><link rel="prefetch" href="/assets/js/19.dd3a15cb.js"><link rel="prefetch" href="/assets/js/20.6a4b5e0c.js"><link rel="prefetch" href="/assets/js/21.59d9098e.js"><link rel="prefetch" href="/assets/js/22.85a4b533.js"><link rel="prefetch" href="/assets/js/23.e6d04c95.js"><link rel="prefetch" href="/assets/js/24.042f00a0.js"><link rel="prefetch" href="/assets/js/25.bf1beed1.js"><link rel="prefetch" href="/assets/js/26.b99f2f89.js"><link rel="prefetch" href="/assets/js/27.52bc0008.js"><link rel="prefetch" href="/assets/js/28.7dd7286f.js"><link rel="prefetch" href="/assets/js/29.0be3fb20.js"><link rel="prefetch" href="/assets/js/3.15d2605a.js"><link rel="prefetch" href="/assets/js/30.f4d8768b.js"><link rel="prefetch" href="/assets/js/31.9e6666e2.js"><link rel="prefetch" href="/assets/js/32.92cdba5a.js"><link rel="prefetch" href="/assets/js/33.74a09b7a.js"><link rel="prefetch" href="/assets/js/34.c9c4d605.js"><link rel="prefetch" href="/assets/js/35.4174f0e4.js"><link rel="prefetch" href="/assets/js/36.d855319c.js"><link rel="prefetch" href="/assets/js/37.db8d7254.js"><link rel="prefetch" href="/assets/js/38.dfcaa5cd.js"><link rel="prefetch" href="/assets/js/39.56d5b7da.js"><link rel="prefetch" href="/assets/js/4.4a1f5422.js"><link rel="prefetch" href="/assets/js/40.453612bd.js"><link rel="prefetch" href="/assets/js/41.c0571a7c.js"><link rel="prefetch" href="/assets/js/42.5a0be010.js"><link rel="prefetch" href="/assets/js/43.3e8cd926.js"><link rel="prefetch" href="/assets/js/44.d0e13dae.js"><link rel="prefetch" href="/assets/js/46.d509fb90.js"><link rel="prefetch" href="/assets/js/47.776180dd.js"><link rel="prefetch" href="/assets/js/48.42a629ea.js"><link rel="prefetch" href="/assets/js/49.02831f2f.js"><link rel="prefetch" href="/assets/js/5.0e9b77f5.js"><link rel="prefetch" href="/assets/js/50.4d2bdbbb.js"><link rel="prefetch" href="/assets/js/51.82ba3c7d.js"><link rel="prefetch" href="/assets/js/52.dc80f315.js"><link rel="prefetch" href="/assets/js/53.e19696e3.js"><link rel="prefetch" href="/assets/js/54.ac98eef3.js"><link rel="prefetch" href="/assets/js/55.91f60523.js"><link rel="prefetch" href="/assets/js/56.afd07b22.js"><link rel="prefetch" href="/assets/js/57.97d39609.js"><link rel="prefetch" href="/assets/js/58.451564be.js"><link rel="prefetch" href="/assets/js/59.b1eb6087.js"><link rel="prefetch" href="/assets/js/6.c1eeb950.js"><link rel="prefetch" href="/assets/js/60.7646810c.js"><link rel="prefetch" href="/assets/js/61.84fa8bfa.js"><link rel="prefetch" href="/assets/js/62.2ad4b141.js"><link rel="prefetch" href="/assets/js/63.ea2e8951.js"><link rel="prefetch" href="/assets/js/64.1de362fc.js"><link rel="prefetch" href="/assets/js/65.1c38b20d.js"><link rel="prefetch" href="/assets/js/66.56c51d67.js"><link rel="prefetch" href="/assets/js/67.0110b9f2.js"><link rel="prefetch" href="/assets/js/68.e2942832.js"><link rel="prefetch" href="/assets/js/69.3119ff69.js"><link rel="prefetch" href="/assets/js/7.17ef356c.js"><link rel="prefetch" href="/assets/js/70.627b3f91.js"><link rel="prefetch" href="/assets/js/71.886af9cd.js"><link rel="prefetch" href="/assets/js/72.ea615c40.js"><link rel="prefetch" href="/assets/js/73.a0a53af9.js"><link rel="prefetch" href="/assets/js/74.5d0c24f0.js"><link rel="prefetch" href="/assets/js/75.8c3ee9b9.js"><link rel="prefetch" href="/assets/js/76.081fbe2d.js"><link rel="prefetch" href="/assets/js/77.0bc0287f.js"><link rel="prefetch" href="/assets/js/78.af5842c1.js"><link rel="prefetch" href="/assets/js/79.09617cdb.js"><link rel="prefetch" href="/assets/js/8.8d58fc92.js"><link rel="prefetch" href="/assets/js/80.3b17fb0e.js"><link rel="prefetch" href="/assets/js/81.1a58d2f6.js"><link rel="prefetch" href="/assets/js/82.604dce1f.js"><link rel="prefetch" href="/assets/js/83.5d6e932c.js"><link rel="prefetch" href="/assets/js/84.1f48cbfe.js"><link rel="prefetch" href="/assets/js/85.de55feec.js"><link rel="prefetch" href="/assets/js/86.71d898e3.js"><link rel="prefetch" href="/assets/js/87.f1b15d5a.js"><link rel="prefetch" href="/assets/js/88.88f66ba6.js"><link rel="prefetch" href="/assets/js/89.a1cf0750.js"><link rel="prefetch" href="/assets/js/9.10583e0b.js"><link rel="prefetch" href="/assets/js/90.18ce4d94.js"><link rel="prefetch" href="/assets/js/91.edfffb17.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e6685ce7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/fluid-horizontal-color.png" alt="Fluid" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" class="nav-link router-link-active">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/samples/use_encryptoptions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/samples/use_encryptoptions.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" class="nav-link router-link-active">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/samples/use_encryptoptions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/samples/use_encryptoptions.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/samples/" aria-current="page" class="sidebar-link">DEMO - Speed Up Accessing Remote Files</a></li><li><a href="/samples/accelerate_pvc.html" class="sidebar-link">DEMO - Accelerate PVC with Fluid</a></li><li><a href="/samples/machinelearning.html" class="sidebar-link">DEMO - Accelerate Machine Learning Training with Fluid</a></li><li><a href="/samples/data_warmup.html" class="sidebar-link">Demo - Data Preloading</a></li><li><a href="/samples/accelerate_hdfs.html" class="sidebar-link">DEMO - Speed Up Accessing HDFS Client Files</a></li><li><a href="/samples/accelerate_s3_minio.html" class="sidebar-link">DEMO - Speed Up Accessing Minio Files</a></li><li><a href="/samples/data_co_locality.html" class="sidebar-link">DEMO - Cache Co-locality for Workload Scheduling</a></li><li><a href="/samples/multi_dataset_same_node_accessing.html" class="sidebar-link">DEMO - Single-Machine Multiple-Dataset Speed Up Accessing Remote Files</a></li><li><a href="/samples/nonroot_access.html" class="sidebar-link">Example - Using Fluid to access non-root user's data</a></li><li><a href="/samples/tieredstore_config.html" class="sidebar-link">Demo - Alluxio Tieredstore Configuration</a></li><li><a href="/samples/use_encryptoptions.html" aria-current="page" class="active sidebar-link">DEMO - Use Secret to configure Dataset sensitive information</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/samples/use_encryptoptions.html#deploy-dataset-with-sensitive-information" class="sidebar-link">Deploy Dataset with sensitive information</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="demo-use-secret-to-configure-dataset-sensitive-information"><a href="#demo-use-secret-to-configure-dataset-sensitive-information" class="header-anchor">#</a> DEMO - Use Secret to configure Dataset sensitive information</h1> <p>When creating a Dataset in Fluid, sometimes we need to configure some sensitive information in the <code>mounts</code>. To ensure security, Fluid provides the ability to configure these sensitive information using Secret. The following takes access to the <a href="https://cn.aliyun.com/product/oss" target="_blank" rel="noopener noreferrer">Aliyun OSS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> data set as an example to illustrate how to configure.</p> <h2 id="deploy-dataset-with-sensitive-information"><a href="#deploy-dataset-with-sensitive-information" class="header-anchor">#</a> Deploy Dataset with sensitive information</h2> <h3 id="create-dataset-and-runtime"><a href="#create-dataset-and-runtime" class="header-anchor">#</a> Create Dataset and Runtime</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> dataset.yaml</span>
apiVersion: data.fluid.io/v1alpha1
kind: Dataset
metadata:
  name: mydata
spec:
  mounts:
  - mountPoint: oss://&lt;OSS_BUCKET&gt;/&lt;OSS_DIRECTORY&gt;/
    name: mydata
    options:
      fs.oss.endpoint: &lt;OSS_ENDPOINT&gt;
    encryptOptions:
      - name: fs.oss.accessKeyId
        valueFrom:
          secretKeyRef:
            name: mysecret
            key: fs.oss.accessKeyId
      - name: fs.oss.accessKeySecret
        valueFrom:
          secretKeyRef:
            name: mysecret
            key: fs.oss.accessKeySecret
---
apiVersion: data.fluid.io/v1alpha1
kind: AlluxioRuntime
metadata:
  name: mydata
spec:
  replicas: 1
  tieredstore:
    levels:
      - mediumtype: MEM
        path: /dev/shm
        quota: 2Gi
        high: &quot;0.95&quot;
        low: &quot;0.7&quot;
EOF</span>
</code></pre></div><p>As you can see, in the above configuration, unlike the direct configuration of <code>fs.oss.endpoint</code>, we changed the configuration of <code>fs.oss.accessKeyId</code> and <code>fs.oss.accessKeySecret</code> to read from Secret to ensure safety.</p> <blockquote><p>It should be noted that if the same key is configured both in <code>options</code> and <code>encryptOptions</code>, then the value in <code>encryptOptions</code> will override the corresponding value in <code>options</code>.</p></blockquote> <h3 id="create-secret"><a href="#create-secret" class="header-anchor">#</a> Create Secret</h3> <p>In the Secret to be created, you need to specify the sensitive information that needs to be configured in the above Dataset.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ cat<span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span>mysecret.yaml</span>
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
stringData:
  fs.oss.accessKeyId: &lt;OSS_ACCESS_KEY_ID&gt;
  fs.oss.accessKeySecret: &lt;OSS_ACCESS_KEY_SECRET&gt;
EOF</span>
</code></pre></div><p>As you can see, the specific contents of <code>fs.oss.accessKeySecret</code> and <code>fs.oss.accessKeyId</code> are written in Secret, and Dataset reads the corresponding value by looking for the Secret and key accroding to its configuration, instead of reading them in its configuration directly. So the security of some data is guaranteed.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/samples/tieredstore_config.html" class="prev">
        Demo - Alluxio Tieredstore Configuration
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.da58bb20.js" defer></script><script src="/assets/js/2.81b06f56.js" defer></script><script src="/assets/js/45.113b6e73.js" defer></script>
  </body>
</html>
