<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Demo - Alluxio Tieredstore Configuration | Fluid</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/fluid-stacked-color.svg">
    <meta name="description" content="Fluid, elastic data abstraction and acceleration for BigData/AI applications in cloud.">
    
    <link rel="preload" href="/assets/css/0.styles.e6685ce7.css" as="style"><link rel="preload" href="/assets/js/app.da58bb20.js" as="script"><link rel="preload" href="/assets/js/2.81b06f56.js" as="script"><link rel="preload" href="/assets/js/44.d0e13dae.js" as="script"><link rel="prefetch" href="/assets/js/10.a7a7f143.js"><link rel="prefetch" href="/assets/js/11.1b4f7b93.js"><link rel="prefetch" href="/assets/js/12.02744490.js"><link rel="prefetch" href="/assets/js/13.171830f3.js"><link rel="prefetch" href="/assets/js/14.bdf00a75.js"><link rel="prefetch" href="/assets/js/15.0c30f930.js"><link rel="prefetch" href="/assets/js/16.a26f5dac.js"><link rel="prefetch" href="/assets/js/17.ea406e20.js"><link rel="prefetch" href="/assets/js/18.756a9497.js"><link rel="prefetch" href="/assets/js/19.dd3a15cb.js"><link rel="prefetch" href="/assets/js/20.6a4b5e0c.js"><link rel="prefetch" href="/assets/js/21.59d9098e.js"><link rel="prefetch" href="/assets/js/22.85a4b533.js"><link rel="prefetch" href="/assets/js/23.e6d04c95.js"><link rel="prefetch" href="/assets/js/24.042f00a0.js"><link rel="prefetch" href="/assets/js/25.bf1beed1.js"><link rel="prefetch" href="/assets/js/26.b99f2f89.js"><link rel="prefetch" href="/assets/js/27.52bc0008.js"><link rel="prefetch" href="/assets/js/28.7dd7286f.js"><link rel="prefetch" href="/assets/js/29.0be3fb20.js"><link rel="prefetch" href="/assets/js/3.15d2605a.js"><link rel="prefetch" href="/assets/js/30.f4d8768b.js"><link rel="prefetch" href="/assets/js/31.9e6666e2.js"><link rel="prefetch" href="/assets/js/32.92cdba5a.js"><link rel="prefetch" href="/assets/js/33.74a09b7a.js"><link rel="prefetch" href="/assets/js/34.c9c4d605.js"><link rel="prefetch" href="/assets/js/35.4174f0e4.js"><link rel="prefetch" href="/assets/js/36.d855319c.js"><link rel="prefetch" href="/assets/js/37.db8d7254.js"><link rel="prefetch" href="/assets/js/38.dfcaa5cd.js"><link rel="prefetch" href="/assets/js/39.56d5b7da.js"><link rel="prefetch" href="/assets/js/4.4a1f5422.js"><link rel="prefetch" href="/assets/js/40.453612bd.js"><link rel="prefetch" href="/assets/js/41.c0571a7c.js"><link rel="prefetch" href="/assets/js/42.5a0be010.js"><link rel="prefetch" href="/assets/js/43.3e8cd926.js"><link rel="prefetch" href="/assets/js/45.113b6e73.js"><link rel="prefetch" href="/assets/js/46.d509fb90.js"><link rel="prefetch" href="/assets/js/47.776180dd.js"><link rel="prefetch" href="/assets/js/48.42a629ea.js"><link rel="prefetch" href="/assets/js/49.02831f2f.js"><link rel="prefetch" href="/assets/js/5.0e9b77f5.js"><link rel="prefetch" href="/assets/js/50.4d2bdbbb.js"><link rel="prefetch" href="/assets/js/51.82ba3c7d.js"><link rel="prefetch" href="/assets/js/52.dc80f315.js"><link rel="prefetch" href="/assets/js/53.e19696e3.js"><link rel="prefetch" href="/assets/js/54.ac98eef3.js"><link rel="prefetch" href="/assets/js/55.91f60523.js"><link rel="prefetch" href="/assets/js/56.afd07b22.js"><link rel="prefetch" href="/assets/js/57.97d39609.js"><link rel="prefetch" href="/assets/js/58.451564be.js"><link rel="prefetch" href="/assets/js/59.b1eb6087.js"><link rel="prefetch" href="/assets/js/6.c1eeb950.js"><link rel="prefetch" href="/assets/js/60.7646810c.js"><link rel="prefetch" href="/assets/js/61.84fa8bfa.js"><link rel="prefetch" href="/assets/js/62.2ad4b141.js"><link rel="prefetch" href="/assets/js/63.ea2e8951.js"><link rel="prefetch" href="/assets/js/64.1de362fc.js"><link rel="prefetch" href="/assets/js/65.1c38b20d.js"><link rel="prefetch" href="/assets/js/66.56c51d67.js"><link rel="prefetch" href="/assets/js/67.0110b9f2.js"><link rel="prefetch" href="/assets/js/68.e2942832.js"><link rel="prefetch" href="/assets/js/69.3119ff69.js"><link rel="prefetch" href="/assets/js/7.17ef356c.js"><link rel="prefetch" href="/assets/js/70.627b3f91.js"><link rel="prefetch" href="/assets/js/71.886af9cd.js"><link rel="prefetch" href="/assets/js/72.ea615c40.js"><link rel="prefetch" href="/assets/js/73.a0a53af9.js"><link rel="prefetch" href="/assets/js/74.5d0c24f0.js"><link rel="prefetch" href="/assets/js/75.8c3ee9b9.js"><link rel="prefetch" href="/assets/js/76.081fbe2d.js"><link rel="prefetch" href="/assets/js/77.0bc0287f.js"><link rel="prefetch" href="/assets/js/78.af5842c1.js"><link rel="prefetch" href="/assets/js/79.09617cdb.js"><link rel="prefetch" href="/assets/js/8.8d58fc92.js"><link rel="prefetch" href="/assets/js/80.3b17fb0e.js"><link rel="prefetch" href="/assets/js/81.1a58d2f6.js"><link rel="prefetch" href="/assets/js/82.604dce1f.js"><link rel="prefetch" href="/assets/js/83.5d6e932c.js"><link rel="prefetch" href="/assets/js/84.1f48cbfe.js"><link rel="prefetch" href="/assets/js/85.de55feec.js"><link rel="prefetch" href="/assets/js/86.71d898e3.js"><link rel="prefetch" href="/assets/js/87.f1b15d5a.js"><link rel="prefetch" href="/assets/js/88.88f66ba6.js"><link rel="prefetch" href="/assets/js/89.a1cf0750.js"><link rel="prefetch" href="/assets/js/9.10583e0b.js"><link rel="prefetch" href="/assets/js/90.18ce4d94.js"><link rel="prefetch" href="/assets/js/91.edfffb17.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e6685ce7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/fluid-horizontal-color.png" alt="Fluid" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" class="nav-link router-link-active">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/samples/tieredstore_config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/samples/tieredstore_config.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" class="nav-link router-link-active">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/samples/tieredstore_config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/samples/tieredstore_config.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/samples/" aria-current="page" class="sidebar-link">DEMO - Speed Up Accessing Remote Files</a></li><li><a href="/samples/accelerate_pvc.html" class="sidebar-link">DEMO - Accelerate PVC with Fluid</a></li><li><a href="/samples/machinelearning.html" class="sidebar-link">DEMO - Accelerate Machine Learning Training with Fluid</a></li><li><a href="/samples/data_warmup.html" class="sidebar-link">Demo - Data Preloading</a></li><li><a href="/samples/accelerate_hdfs.html" class="sidebar-link">DEMO - Speed Up Accessing HDFS Client Files</a></li><li><a href="/samples/accelerate_s3_minio.html" class="sidebar-link">DEMO - Speed Up Accessing Minio Files</a></li><li><a href="/samples/data_co_locality.html" class="sidebar-link">DEMO - Cache Co-locality for Workload Scheduling</a></li><li><a href="/samples/multi_dataset_same_node_accessing.html" class="sidebar-link">DEMO - Single-Machine Multiple-Dataset Speed Up Accessing Remote Files</a></li><li><a href="/samples/nonroot_access.html" class="sidebar-link">Example - Using Fluid to access non-root user's data</a></li><li><a href="/samples/tieredstore_config.html" aria-current="page" class="active sidebar-link">Demo - Alluxio Tieredstore Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/samples/tieredstore_config.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/samples/tieredstore_config.html#single-tier-configuration" class="sidebar-link">Single-Tier Configuration</a></li><li class="sidebar-sub-header"><a href="/samples/tieredstore_config.html#single-tier-multi-directory-configuration" class="sidebar-link">Single-Tier Multi-Directory Configuration</a></li><li class="sidebar-sub-header"><a href="/samples/tieredstore_config.html#multi-tier-configuration" class="sidebar-link">Multi-Tier Configuration</a></li></ul></li><li><a href="/samples/use_encryptoptions.html" class="sidebar-link">DEMO - Use Secret to configure Dataset sensitive information</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="demo-alluxio-tieredstore-configuration"><a href="#demo-alluxio-tieredstore-configuration" class="header-anchor">#</a> Demo - Alluxio Tieredstore Configuration</h1> <p><a href="https://github.com/Alluxio/alluxio" target="_blank" rel="noopener noreferrer">Alluxio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is one of the distributed cache engines leveraged by Fluid.
It supports tieredstores to store cached data in different location, for example different directories with different storage types.
By appropriate configurations on tieredstores, users can get better I/O throughput from Fluid and eliminate bottlenecks when accessing data.</p> <p>The guide introduces you how to configure Alluxio's tieredstore in a declarative way in Fluid.</p> <p>To get more tech detail about Alluxio's tieredstore, please refer to <a href="https://docs.alluxio.io/ee/user/stable/en/core-services/Caching.html?q=tieredstore#configuring-alluxio-storage" target="_blank" rel="noopener noreferrer">Cache-related docs offered by Alluxio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <ul><li><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer">Fluid<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(version &gt;= 0.3.0)</li></ul> <p>Please refer to <a href="https://github.com/fluid-cloudnative/fluid/blob/master/docs/en/userguide/install.md" target="_blank" rel="noopener noreferrer">Fluid installation documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to complete installation.</p> <h2 id="single-tier-configuration"><a href="#single-tier-configuration" class="header-anchor">#</a> Single-Tier Configuration</h2> <p>Here is an typical example for an AlluxioRuntime:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> data.fluid.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> AlluxioRuntime
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> dataset
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">tieredstore</span><span class="token punctuation">:</span>
    <span class="token key atrule">levels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /dev/shm
        <span class="token key atrule">mediumtype</span><span class="token punctuation">:</span> MEM
        <span class="token key atrule">quota</span><span class="token punctuation">:</span> 2Gi
</code></pre></div><p><code>spec.tieredstore.levels</code> contains only one level, so Alluxio will run with single tieredstore.</p> <p>A brief description for each property involved in the above-mentioned example is as follows:</p> <ul><li><code>path</code>: where data cache actually stores</li> <li><code>mediumtype</code>: one of the three values(<code>MEM</code>, <code>SSD</code>, <code>HDD</code>), used to specify medium for <code>path</code></li> <li><code>quota</code>: maximium cache capacity for the level</li></ul> <h2 id="single-tier-multi-directory-configuration"><a href="#single-tier-multi-directory-configuration" class="header-anchor">#</a> Single-Tier Multi-Directory Configuration</h2> <p>The best way to demonstrate such configuration is to give an example like this:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> data.fluid.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> AlluxioRuntime
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> dataset
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">tieredstore</span><span class="token punctuation">:</span>
    <span class="token key atrule">levels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /mnt/ssd0/cache<span class="token punctuation">,</span>/mnt/ssd1/cache
        <span class="token key atrule">mediumtype</span><span class="token punctuation">:</span> SSD
        <span class="token key atrule">quota</span><span class="token punctuation">:</span> 4Gi
</code></pre></div><p>To use multiple directories as  Alluxio's tieredstore,
the only difference is to add more directories in <code>path</code> with comma(&quot;,&quot;) as their separator.
Take the yaml above as an example, with <code>path</code> containing both &quot;/mnt/ssd0/cache&quot; and &quot;/mnt/ssd1/cache&quot;,
Alluxio will use these two directories as its cache store in the meantime.</p> <p>The example also implies some best practices about when you might want to use such configuration: If there is a bottleneck
introduced by storage device itself(e.g. limited by Hard disk I/O throughput), using multiple storage devices(&quot;/mnt/ssd0&quot; and &quot;/mnt/ssd1&quot; in the example above) as Alluxio's tieredstore
can reduce load on each device and get a higher I/O throughput.</p> <blockquote><p>Note: For now, Fluid only support tieredstores with homogeneous medium type.
That is, it is not allowed to use different hybrid storages in a tieredstore in Fluid.</p></blockquote> <p>Also please note that, if multi-directory tieredstore is enabled, <code>quota</code> will be divided equally to each directory.
Take the yaml above as an example, with <code>quota</code> setting to &quot;4Gi&quot;, each directory in <code>path</code> will have a cache capacity of &quot;2Gi&quot;(i.e. 4Gi / 2)</p> <p>If that's not your desired way, Fluid also provides <code>quotaList</code> to configure cache capacity for each directory:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> data.fluid.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> AlluxioRuntime
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> dataset
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">properties</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
    <span class="token comment"># [default property in fluid]</span>
    <span class="token comment"># alluxio.worker.allocator.class: alluxio.worker.block.allocator.MaxFreeAllocator</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">tieredstore</span><span class="token punctuation">:</span>
    <span class="token key atrule">levels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /mnt/ssd0/cache<span class="token punctuation">,</span>/mnt/ssd1/cache
        <span class="token key atrule">mediumtype</span><span class="token punctuation">:</span> SSD
        <span class="token comment">#quota: 4Gi</span>
        <span class="token key atrule">quotaList</span><span class="token punctuation">:</span> 3Gi<span class="token punctuation">,</span>2Gi
</code></pre></div><p><code>quotaList</code> allows you to set maximum cache capacity for each directory.
The <code>quotaList</code> will distributed its values into directories in the same order you defined in <code>path</code>,
so the number of <code>quotaList</code> must be in consistent with the number of <code>path</code>. For example, with the yaml above,
&quot;/mnt/ssd0/cache&quot; has a maximum cache capacity of &quot;3Gi&quot;, while &quot;/mnt/ssd1/cache&quot; has capacity of &quot;2Gi&quot;.</p> <p>Another Alluxio property related to multi-directory tieredstore is <code>alluxio.worker.allocator.class</code>.
All the supported values are described as follows:</p> <ul><li>&quot;MaxFreeAllocator&quot;: Always try to allocate the cache to the storage directory that currently has the most availability</li> <li>&quot;RoundRobinAllocator&quot;: On each tier, maintain a Round Robin order of storage directories. Try to allocate the new cache into a directory following the Round Robin order, and if that does not work, go to the next lower tier.</li> <li>&quot;GreedyAllocator&quot;: Always try to put the new cache into the first directory that can contain it.</li></ul> <p>By default, Fluid uses &quot;MaxFreeAllocator&quot; to decide where to store a new cache. Users can feel free to change this behavior by setting corresponding allocator to the Alluxio property.
For example, users can change <code>alluxio.worker.allocator.class</code> to &quot;alluxio.worker.block.allocator.RoundRobinAllocator&quot; to choose round robin strategy.</p> <h2 id="multi-tier-configuration"><a href="#multi-tier-configuration" class="header-anchor">#</a> Multi-Tier Configuration</h2> <p>Here is an example for multi-tier configuration:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> data.fluid.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> AlluxioRuntime
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> dataset
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">tieredstore</span><span class="token punctuation">:</span>
    <span class="token key atrule">levels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /dev/shm
        <span class="token key atrule">mediumtype</span><span class="token punctuation">:</span> MEM
        <span class="token key atrule">quota</span><span class="token punctuation">:</span> 2Gi
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /mnt/ssd0/cache<span class="token punctuation">,</span>/mnt/ssd1/cache
        <span class="token key atrule">mediumtype</span><span class="token punctuation">:</span> SSD
        <span class="token key atrule">quotaList</span><span class="token punctuation">:</span> 3Gi<span class="token punctuation">,</span>2Gi
</code></pre></div><p>Multiple tieredstores are just tieredstores with some order. Take the yaml above as an example,
we specify two tieredstores: the first level uses memory for high-speed data access and the second one uses
SSD to get bigger cache capacity.</p> <p>Level order defined in <code>spec.tieredstore.levels</code> will not affect the actual level order used by Alluxio.
Before Alluxio launched, Fluid will firstly sort the levels according to <code>mediumtype</code>, and storages with higher I/O throughput will get higher priority.
That is, Fluid will sort tieredstores in the following orders: &quot;MEM&quot; &lt; &quot;SSD&quot; &lt; &quot;HDD&quot;.</p> <blockquote><p>Note: Alluxio uses a different way to report its capacity usage when using multi-tier configuration.
For now, this will lead to some inaccuracy when showing <code>Dataset.Cached</code> and <code>Dataset.CachedPercentage</code> in Fluid.</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/samples/nonroot_access.html" class="prev">
        Example - Using Fluid to access non-root user's data
      </a></span> <span class="next"><a href="/samples/use_encryptoptions.html">
        DEMO - Use Secret to configure Dataset sensitive information
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.da58bb20.js" defer></script><script src="/assets/js/2.81b06f56.js" defer></script><script src="/assets/js/44.d0e13dae.js" defer></script>
  </body>
</html>
