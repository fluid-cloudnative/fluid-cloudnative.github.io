<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM Performance analysis tool usage | Fluid</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/fluid-stacked-color.svg">
    <meta name="description" content="Fluid, elastic data abstraction and acceleration for BigData/AI applications in cloud.">
    
    <link rel="preload" href="/assets/css/0.styles.e6685ce7.css" as="style"><link rel="preload" href="/assets/js/app.ffaec890.js" as="script"><link rel="preload" href="/assets/js/2.931ec2de.js" as="script"><link rel="preload" href="/assets/js/28.7dd7286f.js" as="script"><link rel="prefetch" href="/assets/js/10.a7a7f143.js"><link rel="prefetch" href="/assets/js/11.1b4f7b93.js"><link rel="prefetch" href="/assets/js/12.02744490.js"><link rel="prefetch" href="/assets/js/13.980d2d9a.js"><link rel="prefetch" href="/assets/js/14.1ff2925b.js"><link rel="prefetch" href="/assets/js/15.097c3aea.js"><link rel="prefetch" href="/assets/js/16.a26f5dac.js"><link rel="prefetch" href="/assets/js/17.0b51d4d3.js"><link rel="prefetch" href="/assets/js/18.99d63313.js"><link rel="prefetch" href="/assets/js/19.b5a99637.js"><link rel="prefetch" href="/assets/js/20.e177defe.js"><link rel="prefetch" href="/assets/js/21.e778e69c.js"><link rel="prefetch" href="/assets/js/22.0ce8012a.js"><link rel="prefetch" href="/assets/js/23.15a0e1ab.js"><link rel="prefetch" href="/assets/js/24.042f00a0.js"><link rel="prefetch" href="/assets/js/25.a13adfa4.js"><link rel="prefetch" href="/assets/js/26.6a242253.js"><link rel="prefetch" href="/assets/js/27.52bc0008.js"><link rel="prefetch" href="/assets/js/29.77159cd6.js"><link rel="prefetch" href="/assets/js/3.15d2605a.js"><link rel="prefetch" href="/assets/js/30.a8b3a0e9.js"><link rel="prefetch" href="/assets/js/31.9b2c60b6.js"><link rel="prefetch" href="/assets/js/32.adb060ef.js"><link rel="prefetch" href="/assets/js/33.307c92e8.js"><link rel="prefetch" href="/assets/js/34.a57a59cf.js"><link rel="prefetch" href="/assets/js/35.c35a0c5d.js"><link rel="prefetch" href="/assets/js/36.d855319c.js"><link rel="prefetch" href="/assets/js/37.db8d7254.js"><link rel="prefetch" href="/assets/js/38.dfcaa5cd.js"><link rel="prefetch" href="/assets/js/39.56d5b7da.js"><link rel="prefetch" href="/assets/js/4.4a1f5422.js"><link rel="prefetch" href="/assets/js/40.bf4b59e4.js"><link rel="prefetch" href="/assets/js/41.bbf8f847.js"><link rel="prefetch" href="/assets/js/42.d8196745.js"><link rel="prefetch" href="/assets/js/43.5fdcdb98.js"><link rel="prefetch" href="/assets/js/44.87824c99.js"><link rel="prefetch" href="/assets/js/45.113b6e73.js"><link rel="prefetch" href="/assets/js/46.d509fb90.js"><link rel="prefetch" href="/assets/js/47.7651b846.js"><link rel="prefetch" href="/assets/js/48.24413e2b.js"><link rel="prefetch" href="/assets/js/49.02831f2f.js"><link rel="prefetch" href="/assets/js/5.0e9b77f5.js"><link rel="prefetch" href="/assets/js/50.4d2bdbbb.js"><link rel="prefetch" href="/assets/js/51.60003f28.js"><link rel="prefetch" href="/assets/js/52.d14067d1.js"><link rel="prefetch" href="/assets/js/53.e19696e3.js"><link rel="prefetch" href="/assets/js/54.ac98eef3.js"><link rel="prefetch" href="/assets/js/55.bf81cb93.js"><link rel="prefetch" href="/assets/js/56.0de45e42.js"><link rel="prefetch" href="/assets/js/57.97d39609.js"><link rel="prefetch" href="/assets/js/58.451564be.js"><link rel="prefetch" href="/assets/js/59.f55f2829.js"><link rel="prefetch" href="/assets/js/6.c1eeb950.js"><link rel="prefetch" href="/assets/js/60.1480fd5b.js"><link rel="prefetch" href="/assets/js/61.86c4f21d.js"><link rel="prefetch" href="/assets/js/62.2ad4b141.js"><link rel="prefetch" href="/assets/js/63.ea2e8951.js"><link rel="prefetch" href="/assets/js/64.1de362fc.js"><link rel="prefetch" href="/assets/js/65.1c38b20d.js"><link rel="prefetch" href="/assets/js/66.56c51d67.js"><link rel="prefetch" href="/assets/js/67.6fd87e28.js"><link rel="prefetch" href="/assets/js/68.f0509124.js"><link rel="prefetch" href="/assets/js/69.e8c83ee8.js"><link rel="prefetch" href="/assets/js/7.17ef356c.js"><link rel="prefetch" href="/assets/js/70.0c9b38df.js"><link rel="prefetch" href="/assets/js/71.31c8561e.js"><link rel="prefetch" href="/assets/js/72.4b06d335.js"><link rel="prefetch" href="/assets/js/73.235371ab.js"><link rel="prefetch" href="/assets/js/74.ca6a5be0.js"><link rel="prefetch" href="/assets/js/75.734c8bc7.js"><link rel="prefetch" href="/assets/js/76.db59eda3.js"><link rel="prefetch" href="/assets/js/77.9e26ce90.js"><link rel="prefetch" href="/assets/js/78.af5842c1.js"><link rel="prefetch" href="/assets/js/79.09617cdb.js"><link rel="prefetch" href="/assets/js/8.8d58fc92.js"><link rel="prefetch" href="/assets/js/80.3b17fb0e.js"><link rel="prefetch" href="/assets/js/81.1a58d2f6.js"><link rel="prefetch" href="/assets/js/82.604dce1f.js"><link rel="prefetch" href="/assets/js/83.5d6e932c.js"><link rel="prefetch" href="/assets/js/84.1f48cbfe.js"><link rel="prefetch" href="/assets/js/85.de55feec.js"><link rel="prefetch" href="/assets/js/86.71d898e3.js"><link rel="prefetch" href="/assets/js/87.f1b15d5a.js"><link rel="prefetch" href="/assets/js/88.88f66ba6.js"><link rel="prefetch" href="/assets/js/89.a1cf0750.js"><link rel="prefetch" href="/assets/js/9.10583e0b.js"><link rel="prefetch" href="/assets/js/90.18ce4d94.js"><link rel="prefetch" href="/assets/js/91.edfffb17.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e6685ce7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/fluid-horizontal-color.png" alt="Fluid" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link router-link-active">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" class="nav-link">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/profiling.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/dev/profiling.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docs" class="dropdown-title"><span class="title">Docs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Docs" class="mobile-dropdown-title"><span class="title">Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link router-link-active">
  Dev
</a></li><li class="dropdown-item"><!----> <a href="/samples/" class="nav-link">
  Samples
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Community</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/community/community.html" class="nav-link">
  Community
</a></li><li class="dropdown-item"><!----> <a href="/community/ADOPTERS.html" class="nav-link">
  Adopters
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/technology/" class="nav-link">
  Technology
</a></li><li class="dropdown-item"><!----> <a href="/blog/releases/" class="nav-link">
  Releases
</a></li><li class="dropdown-item"><!----> <a href="/blog/casestudy/" class="nav-link">
  Case Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/profiling.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/dev/profiling.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dev/" aria-current="page" class="sidebar-link">Developer Guide</a></li><li><a href="/dev/api_doc.html" class="sidebar-link">API Reference</a></li><li><a href="/dev/dev_with_kind.html" class="sidebar-link">Fluid Development Environment with Kind on MacOS</a></li><li><a href="/dev/profiling.html" aria-current="page" class="active sidebar-link">JVM Performance analysis tool usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/profiling.html#download-and-unzip" class="sidebar-link">Download and unzip</a></li><li class="sidebar-sub-header"><a href="/dev/profiling.html#simple-usage" class="sidebar-link">Simple usage</a></li></ul></li><li><a href="/dev/multiple-client-support.html" class="sidebar-link">Muitiple Client Support</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jvm-performance-analysis-tool-usage"><a href="#jvm-performance-analysis-tool-usage" class="header-anchor">#</a> JVM Performance analysis tool usage</h1> <p>Sometimes, it's necessary to perform performance analysis on Fluid's underlying cache engine, such as Alluxio, to find performance bottlenecks more quickly.
<a href="https://github.com/jvm-profiling-tools/async-profiler" target="_blank" rel="noopener noreferrer">async-profiler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>is a comprehensive JVM profiling tool，supporting sampling of various events such as <code>cpu</code> and <code>lock</code>.
In this document, we introduce the simple usage of <code>async-profiler</code>.
Please query <a href="https://github.com/jvm-profiling-tools/async-profiler" target="_blank" rel="noopener noreferrer">async-profiler official document<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to get a more detailed tutorial.</p> <h2 id="download-and-unzip"><a href="#download-and-unzip" class="header-anchor">#</a> Download and unzip</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">wget</span> https://github.com/jvm-profiling-tools/async-profiler/releases/download/v1.7.1/async-profiler-1.7.1-linux-x64.tar.gz
$ <span class="token function">tar</span> -zxf async-profiler-1.7.1-linux-x64.tar.gz
</code></pre></div><h2 id="simple-usage"><a href="#simple-usage" class="header-anchor">#</a> Simple usage</h2> <ol><li><p>View Java process</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ jps
<span class="token number">8576</span> AlluxioFuse
<span class="token number">33916</span> Jps
</code></pre></div></li> <li><p>Sampling CPU time being taken up</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./profiler.sh -e cpu -i 1ms -d <span class="token number">300</span> -f cpu.txt <span class="token operator">&lt;</span>PID<span class="token operator">&gt;</span>
</code></pre></div><p>**Description of command **:</p> <ul><li><code>-e &lt;EVENT&gt;</code>: specify the sampling time, supporting <code>cpu</code>, <code>lock</code>, etc.</li> <li><code>-i &lt;INTERVAL&gt;</code>: specify the sampling interval, supporting the minimum nanosecond level sampling, but it is not recommended to set too small, because it will have a performance impact on the process being sampled</li> <li><code>-d &lt;DURATION&gt;</code>: specify the sampling duration, in seconds</li> <li><code>-f &lt;FILENAME&gt;</code>: specify the name and format of the saved file. The file format affects the presentation of the final result. The <code>txt</code> file format is convenient for viewing on the server, and the <code>svg</code> vector diagram format can be opened in the browser</li> <li><code>&lt;PID&gt;</code>: all samples must specify the PID of a JVM process, such as the PID of AlluxioFuse process in the <code>jps</code> command is <code>8576</code></li></ul></li> <li><p>Sampling result analysis</p> <p>async-profiler will periodically sample the JVM call stack and sort it from high to low according to the number of times it was sampled.
It can be considered that, the higher the sampling times of function, the more CPU time it takes. Therefore, by observing call of the top function, you can quickly find the main performance bottleneck of the Java process.</p> <p>The following is the result of cpu sampling on AlluxioFuse. It consists of three parts：</p> <p>The first part introduces the number of sampling, GC conditions, etc. Among them, <code>Frame buffer usage</code> represents the buffer usage rate for saving the sampling results.
If the interval of sampling is too small or the time of sampling is too long, it may prompt <code>overflow</code>. At this time, you can use <code>-b N</code> to increase the buffer capacity.</p> <p>The second part is the call stack of functions sorted from high to low according to the number of samples. The performance analysis focuses on the top few.</p> <p>The third part, at the end, is a function that CPU time being taken up from high to low.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> cpu.txt
--- Execution profile ---
Total samples       <span class="token builtin class-name">:</span> <span class="token number">131152</span>
GC_active           <span class="token builtin class-name">:</span> <span class="token number">8</span> <span class="token punctuation">(</span><span class="token number">0.01</span>%<span class="token punctuation">)</span>
unknown_Java        <span class="token builtin class-name">:</span> <span class="token number">321</span> <span class="token punctuation">(</span><span class="token number">0.24</span>%<span class="token punctuation">)</span>
not_walkable_Java   <span class="token builtin class-name">:</span> <span class="token number">234</span> <span class="token punctuation">(</span><span class="token number">0.18</span>%<span class="token punctuation">)</span>
deoptimization      <span class="token builtin class-name">:</span> <span class="token number">7</span> <span class="token punctuation">(</span><span class="token number">0.01</span>%<span class="token punctuation">)</span>
skipped             <span class="token builtin class-name">:</span> <span class="token number">17</span> <span class="token punctuation">(</span><span class="token number">0.01</span>%<span class="token punctuation">)</span>

Frame buffer usage  <span class="token builtin class-name">:</span> <span class="token number">23.9887</span>%

--- <span class="token number">9902352571</span> ns <span class="token punctuation">(</span><span class="token number">7.48</span>%<span class="token punctuation">)</span>, <span class="token number">9820</span> samples
  <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">]</span> copy_user_enhanced_fast_string_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span> copyout_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span> copy_page_to_iter_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span> skb_copy_datagram_iter_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> tcp_recvmsg_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span> inet_recvmsg_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span> sock_read_iter_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span> __vfs_read_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span> vfs_read_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">9</span><span class="token punctuation">]</span> ksys_read_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> do_syscall_64_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> entry_SYSCALL_64_after_hwframe_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token builtin class-name">read</span>
  <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> io.netty.channel.unix.FileDescriptor.readAddress
  <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> io.netty.channel.unix.FileDescriptor.readAddress
  <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span> io.netty.channel.epoll.AbstractEpollChannel.doReadBytes
  <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span> io.netty.channel.epoll.AbstractEpollStreamChannel<span class="token variable">$EpollStreamUnsafe</span>.epollInReady
  <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> io.netty.channel.epoll.EpollEventLoop.processReady
  <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span> io.netty.channel.epoll.EpollEventLoop.run
  <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> io.netty.util.concurrent.SingleThreadEventExecutor<span class="token variable">$4</span>.run
  <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> io.netty.util.internal.ThreadExecutorMap<span class="token variable">$2</span>.run
  <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span> java.lang.Thread.run

--- <span class="token number">6862595502</span> ns <span class="token punctuation">(</span><span class="token number">5.19</span>%<span class="token punctuation">)</span>, <span class="token number">6836</span> samples
  <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">]</span> jbyte_disjoint_arraycopy
  <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span> io.netty.util.internal.PlatformDependent0.copyMemoryWithSafePointPolling
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span> io.netty.util.internal.PlatformDependent0.copyMemory
  <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span> io.netty.util.internal.PlatformDependent.copyMemory
  <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> io.netty.buffer.UnsafeByteBufUtil.getBytes
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span> io.netty.buffer.PooledUnsafeDirectByteBuf.getBytes
  <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span> io.netty.buffer.AbstractUnpooledSlicedByteBuf.getBytes
  <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span> io.netty.buffer.AbstractByteBuf.readBytes
  <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span> io.grpc.netty.NettyReadableBuffer.readBytes
  <span class="token punctuation">[</span> <span class="token number">9</span><span class="token punctuation">]</span> io.grpc.internal.CompositeReadableBuffer<span class="token variable">$3</span>.readInternal
  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> io.grpc.internal.CompositeReadableBuffer<span class="token variable">$ReadOperation</span>.read
  <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> io.grpc.internal.CompositeReadableBuffer.execute
  <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> io.grpc.internal.CompositeReadableBuffer.readBytes
  <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> alluxio.grpc.ReadableDataBuffer.readBytes
  <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> alluxio.client.block.stream.BlockInStream.readInternal
  <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span> alluxio.client.block.stream.BlockInStream.read
  <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span> alluxio.client.file.AlluxioFileInStream.read
  <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> alluxio.client.file.cache.LocalCacheFileInStream.readExternalPage
  <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span> alluxio.client.file.cache.LocalCacheFileInStream.read
  <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> alluxio.fuse.AlluxioJniFuseFileSystem.read
  <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> alluxio.jnifuse.AbstractFuseFileSystem.readCallback

--- <span class="token number">6257779616</span> ns <span class="token punctuation">(</span><span class="token number">4.73</span>%<span class="token punctuation">)</span>, <span class="token number">6234</span> samples
  <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">]</span> jlong_disjoint_arraycopy
  <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span> java.util.HashMap.isEmpty
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span> java.util.HashSet.isEmpty
  <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span> alluxio.client.file.cache.store.MemoryPageStore.put
  <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> alluxio.client.file.cache.LocalCacheManager.addPage
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span> alluxio.client.file.cache.LocalCacheManager.putInternal
  <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span> alluxio.client.file.cache.LocalCacheManager.lambda<span class="token variable">$put</span><span class="token variable">$0</span>
  <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span> alluxio.client.file.cache.LocalCacheManager<span class="token variable">$$</span>Lambda<span class="token variable">$324</span>.504173880.run
  <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span> java.util.concurrent.Executors<span class="token variable">$RunnableAdapter</span>.call
  <span class="token punctuation">[</span> <span class="token number">9</span><span class="token punctuation">]</span> java.util.concurrent.FutureTask.run
  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> java.util.concurrent.ThreadPoolExecutor.runWorker
  <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> java.util.concurrent.ThreadPoolExecutor<span class="token variable">$Worker</span>.run
  <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> java.lang.Thread.run

--- <span class="token number">5784713511</span> ns <span class="token punctuation">(</span><span class="token number">4.37</span>%<span class="token punctuation">)</span>, <span class="token number">5730</span> samples
  <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">]</span> memcpy_erms_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span> fuse_copy_do?<span class="token punctuation">[</span>fuse<span class="token punctuation">]</span>_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span> fuse_copy_page?<span class="token punctuation">[</span>fuse<span class="token punctuation">]</span>_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span> fuse_copy_args?<span class="token punctuation">[</span>fuse<span class="token punctuation">]</span>_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> fuse_dev_do_write?<span class="token punctuation">[</span>fuse<span class="token punctuation">]</span>_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span> fuse_dev_write?<span class="token punctuation">[</span>fuse<span class="token punctuation">]</span>_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span> do_iter_readv_writev_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span> do_iter_write_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span> vfs_writev_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span> <span class="token number">9</span><span class="token punctuation">]</span> do_writev_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> do_syscall_64_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> entry_SYSCALL_64_after_hwframe_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> writev
<span class="token comment"># ...</span>
         ns  percent  samples  <span class="token function">top</span>
  ----------  -------  -------  ---
 <span class="token number">18748768943</span>   <span class="token number">14.17</span>%    <span class="token number">18618</span>  jlong_disjoint_arraycopy
 <span class="token number">12465418383</span>    <span class="token number">9.42</span>%    <span class="token number">12375</span>  copy_user_enhanced_fast_string_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
 <span class="token number">11200001765</span>    <span class="token number">8.46</span>%    <span class="token number">11153</span>  /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/server/libjvm.so
  <span class="token number">8891711765</span>    <span class="token number">6.72</span>%     <span class="token number">8863</span>  jbyte_disjoint_arraycopy
  <span class="token number">5934957181</span>    <span class="token number">4.48</span>%     <span class="token number">5877</span>  memcpy_erms_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">5887736474</span>    <span class="token number">4.45</span>%     <span class="token number">5766</span>  _raw_spin_unlock_irqrestore_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">5722725002</span>    <span class="token number">4.32</span>%     <span class="token number">5669</span>  /lib/x86_64-linux-gnu/libc-2.23.so
  <span class="token number">5029972109</span>    <span class="token number">3.80</span>%     <span class="token number">5024</span>  jint_disjoint_arraycopy
  <span class="token number">3313144887</span>    <span class="token number">2.50</span>%     <span class="token number">3284</span>  _raw_spin_lock_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">2345730045</span>    <span class="token number">1.77</span>%     <span class="token number">2341</span>  jshort_disjoint_arraycopy
  <span class="token number">2111075419</span>    <span class="token number">1.60</span>%     <span class="token number">2098</span>  java.lang.Long.equals
  <span class="token number">1844566888</span>    <span class="token number">1.39</span>%     <span class="token number">1838</span>  __do_page_fault_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">1493059573</span>    <span class="token number">1.13</span>%     <span class="token number">1472</span>  get_user_pages_fast_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">1371331539</span>    <span class="token number">1.04</span>%     <span class="token number">1340</span>  finish_task_switch_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">1333100221</span>    <span class="token number">1.01</span>%     <span class="token number">1324</span>  clear_page_erms_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
  <span class="token number">1165108284</span>    <span class="token number">0.88</span>%     <span class="token number">1155</span>  io.netty.util.Recycler<span class="token variable">$WeakOrderQueue</span>.transfer
  <span class="token number">1010331386</span>    <span class="token number">0.76</span>%     <span class="token number">1004</span>  __free_pages_ok_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
   <span class="token number">806598842</span>    <span class="token number">0.61</span>%      <span class="token number">798</span>  fuse_copy_do?<span class="token punctuation">[</span>fuse<span class="token punctuation">]</span>_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
   <span class="token number">805970066</span>    <span class="token number">0.61</span>%      <span class="token number">802</span>  try_charge_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
   <span class="token number">773960647</span>    <span class="token number">0.58</span>%      <span class="token number">757</span>  <span class="token builtin class-name">read</span>
   <span class="token number">660352796</span>    <span class="token number">0.50</span>%      <span class="token number">656</span>  get_page_from_freelist_<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
</code></pre></div></li></ol> <blockquote><p><strong>Tips</strong>:</p> <ul><li>General performance analysis only needs to sample <code>cpu</code> and <code>lock</code>, their results are more meaningful for reference</li> <li>If it is memory-related tuning, try sampling the <code>alloc</code> event</li> <li>The <code>wall</code> event samples the wall time. The <code>-t</code> option allows each process to be sampled separately. The combination of the two is better</li> <li>Only one event can be sampled in the same process at the same time</li></ul></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dev/dev_with_kind.html" class="prev">
        Fluid Development Environment with Kind on MacOS
      </a></span> <span class="next"><a href="/dev/multiple-client-support.html">
        Muitiple Client Support
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffaec890.js" defer></script><script src="/assets/js/2.931ec2de.js" defer></script><script src="/assets/js/28.7dd7286f.js" defer></script>
  </body>
</html>
