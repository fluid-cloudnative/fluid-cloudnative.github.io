<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v1.0 docs-doc-page docs-doc-id-case-study/zuoyebang-case-study" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Zuoyebang&#x27;s Case Study | Fluid</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://fluid-cloudnative.github.io/zh/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://fluid-cloudnative.github.io/zh/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://fluid-cloudnative.github.io/zh/docs/case-study/zuoyebang-case-study"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="v1.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.0"><meta data-rh="true" name="docsearch:version" content="v1.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.0"><meta data-rh="true" property="og:title" content="Zuoyebang&#x27;s Case Study | Fluid"><meta data-rh="true" name="description" content="This article introduces the a Fluid use case in Zuoyebang."><meta data-rh="true" property="og:description" content="This article introduces the a Fluid use case in Zuoyebang."><link data-rh="true" rel="icon" href="/zh/img/fluid-icon-color.png"><link data-rh="true" rel="canonical" href="https://fluid-cloudnative.github.io/zh/docs/case-study/zuoyebang-case-study"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/docs/case-study/zuoyebang-case-study" hreflang="en"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/zh/docs/case-study/zuoyebang-case-study" hreflang="zh"><link data-rh="true" rel="alternate" href="https://fluid-cloudnative.github.io/docs/case-study/zuoyebang-case-study" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://LFPGLLH528-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Fluid RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Fluid Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Fluid" href="/zh/opensearch.xml"><link rel="stylesheet" href="/zh/assets/css/styles.8e3a1f9d.css">
<script src="/zh/assets/js/runtime~main.14e8aed6.js" defer="defer"></script>
<script src="/zh/assets/js/main.9c023251.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/fluid-horizontal-color.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh/img/fluid-horizontal-white.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs">文档</a><a class="navbar__item navbar__link" href="/zh/blog">博客</a><a class="navbar__item navbar__link" sidebarid="communitySidebar" href="/zh/community/meeting_schedule">社区</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/docs">v1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/case-study/zuoyebang-case-study">Latest</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/case-study/zuoyebang-case-study">v1.0</a></li><li><a class="dropdown__link" href="/zh/docs/v0.9/case-study/zuoyebang-case-study">v0.9</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/case-study/zuoyebang-case-study" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/docs/case-study/zuoyebang-case-study" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs">Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/get-started/quick-start">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/demos/demo-accelerate-remote-file-accessing-with-fluid">Demos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/tutorials/dataset-creation/accelerate-data-accessing-posix">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/operation-guide/runtime-monitoring">Operation Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/developer-guide/how-to-develop">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/case-study/alibaba-case-study">Case Study</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/case-study/alibaba-case-study">Alibaba&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/case-study/weibo-case-study">Weibo&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/case-study/metabit-trading-case-study">Metabit Trading&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/case-study/haomo-case-study">HAOMO&#x27;s Case Study</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/case-study/zuoyebang-case-study">Zuoyebang&#x27;s Case Study</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/troubleshooting-and-faq/troubleshooting">Troubleshooting and FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/release-and-API-doc/release">Release and API Doc</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Case Study</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Zuoyebang&#x27;s Case Study</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v1.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Zuoyebang&#x27;s Case Study</h1>
<blockquote>
<p>This article introduces the a Fluid use case in Zuoyebang.</p>
</blockquote>
<p><em>By Dong Xiaocong and Zhang Haoran</em></p>
<p><em>Planning by Liu Yan</em></p>
<p>Large-scale information retrieval systems have always been the cornerstone of the platform business of enterprises. They often run in the large clusters with thousands of bare metal servers. The data amount is huge, the requirements for performance, throughput, and stability are critical, and the tolerance for failure is low.</p>
<p>In addition to the maintenance, data iteration and service governance in ultra-large-scale clusters and massive data scenarios become critical challenges. Incremental and full data distribution efficiency together with the short-term and long-term hot data tracking are all issues that need to be studied in depth.</p>
<p>This article will introduce the fluid-based compute-storage separation architecture designed and implemented by Zuoyebang, which can reduce the complexity of large-scale information retrieval system services. Therefore, large-scale information retrieval systems can be managed smoothly like normal online businesses.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="problems-faced-by-large-scale-information-retrieval-systems">Problems Faced by Large-Scale Information Retrieval Systems<a href="#problems-faced-by-large-scale-information-retrieval-systems" class="hash-link" aria-label="Problems Faced by Large-Scale Information Retrieval Systems的直接链接" title="Problems Faced by Large-Scale Information Retrieval Systems的直接链接">​</a></h2>
<p>The intelligent analysis and search function of the course study materials of Zuoyebang rely on large-scale data retrieval systems. The cluster size is more than 1,000 units, and the total data volume is more than 100 TB. The entire system consists of several shards, each of which is loaded with the same datasets by several servers. At the maintenance level, we require performance to reach P991.Xms, throughput peak to 100 GB, and stability to reach more than 99.999%.</p>
<p><img decoding="async" loading="lazy" alt="problem" src="/zh/assets/images/zuoyebang-problem-0e3c53d4aa4a1744c0f179e06202b49c.png" width="2014" height="1280" class="img_ev3q"></p>
<p>In the earlier environment, more consideration was given to data localization storage to improve the efficiency and stability of data reading. The information retrieval system generates index items every day and needs to update TB-level data. After the data is produced through offline database building services, it needs to be updated to corresponding shards, respectively. This mode brings many other challenges. The critical issues are data iteration and extensibility.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-dispersion-of-datasets">1. Dispersion of Datasets<a href="#1-dispersion-of-datasets" class="hash-link" aria-label="1. Dispersion of Datasets的直接链接" title="1. Dispersion of Datasets的直接链接">​</a></h3>
<p>In operation, each node of each shard needs to copy all the data of this shard, which brings the problem of synchronous data distribution. In operation, if you want to synchronize data to a single server node, you need to use hierarchical distribution. First, the first level (10 level) is distributed to the second level (100 level) and then to the third level (1,000 level). The distribution cycle is long and requires layer-by-layer verification to ensure data accuracy.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-weak-auto-scaling-of-business-resources">2. Weak Auto Scaling of Business Resources<a href="#2-weak-auto-scaling-of-business-resources" class="hash-link" aria-label="2. Weak Auto Scaling of Business Resources的直接链接" title="2. Weak Auto Scaling of Business Resources的直接链接">​</a></h3>
<p>The original system architecture adopts a tight coupling between compute and storage. The data storage and compute resources are bundled tightly, and the scaling of resources is not high. Scaling often needs to be carried out on an hourly basis, lacking the ability to cope with sudden peak network traffic scaling.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-insufficient-extensibility-for-a-single-shard-of-data">3. Insufficient Extensibility for a Single Shard of Data<a href="#3-insufficient-extensibility-for-a-single-shard-of-data" class="hash-link" aria-label="3. Insufficient Extensibility for a Single Shard of Data的直接链接" title="3. Insufficient Extensibility for a Single Shard of Data的直接链接">​</a></h3>
<p>The cap of a single shard of data is limited by the cap of single storage in a sharded cluster. If the storage capacity reaches the upper limit, you need to split the datasets, which is not driven by business requirements.</p>
<p>Problems with data iteration and extensibility lead to cost pressures and weak automated processes.</p>
<p>The key problems are caused by the decoupling of compute and storage through the analysis of the information retrieval system operation and data update process. Therefore, we need to consider how to decouple compute and storage. The complexity problem can only be solved fundamentally after introducing the compute-storage separation architecture.</p>
<p>The most important thing about compute-storage separation is to split the way each node stores the full data of this shard and store the data in the shard on a logical remote machine. Compute-storage separation brings other problems, such as stability problems, reading methods and speed under large data volume, and the degree of intrusion to the business. However, these problems can be solved. Based on this, we believe that compute-storage separation must be the best way to solve the problem of system complexity.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compute-storage-separation-architecture-solves-complexity-issues">Compute-Storage Separation Architecture Solves Complexity Issues<a href="#compute-storage-separation-architecture-solves-complexity-issues" class="hash-link" aria-label="Compute-Storage Separation Architecture Solves Complexity Issues的直接链接" title="Compute-Storage Separation Architecture Solves Complexity Issues的直接链接">​</a></h2>
<p>The new architecture must achieve the following goals to solve the problems that need to be considered in the preceding compute-storage separation:</p>
<ol>
<li>
<p><strong>Reading Stability</strong> – The compute-storage separation is the replacement of the original file read by various components that work together. The data loading method can be replaced, but the stability of data reading still needs to be kept at the same level as the original.</p>
</li>
<li>
<p><strong>In the scenario of simultaneous data update of thousands of nodes in each shard, the reading speed needs to be improved to the greatest extent.</strong> Also, the pressure on the network needs to be controlled to a certain range.</p>
</li>
<li>
<p><strong>It supports reading data through the POSIX interface.</strong> POSIX is the most adaptable approach to various business scenarios. This way, the impact of downstream changes on the upstream is blocked without intruding into the business scenarios.</p>
</li>
<li>
<p><strong>The Controllability of the Data Iteration Process</strong> – For online businesses, data iteration can be regarded as CD processes equivalent to service iteration. Then, the controllability of data iteration is important because it is part of the CD processes.</p>
</li>
<li>
<p><strong>The Scalability of Datasets</strong> – The new architecture needs to be a set of replicable, expandable models. Therefore, it can be equipped to cope with the scaling of datasets and cluster sizes.</p>
</li>
</ol>
<p>Finally, we chose the Fluid open-source project to achieve the goals as the key link of the new architecture.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="component-introduction">Component Introduction<a href="#component-introduction" class="hash-link" aria-label="Component Introduction的直接链接" title="Component Introduction的直接链接">​</a></h3>
<p>Fluid is an open-source Kubernetes-native distributed dataset orchestration and acceleration engine. It mainly serves data-intensive applications in cloud-native scenarios, such as big data applications and AI applications.</p>
<p>The data layer abstraction provided by the Kubernetes service allows data to be moved, replicated, evicted, transformed, and managed flexibly and efficiently between storage sources, such as HDFS, OSS, Ceph, and cloud-native application computing on Kubernetes.</p>
<p>Moreover, specific data operations are transparent to users. Users no longer need to worry about the efficiency of accessing remote data, the convenience of managing data sources, and how to help Kubernetes make O&amp;M scheduling decisions. Users only need to access the abstracted data in the most natural Kubernetes native data volume mode. Then, the remaining tasks and underlying details can be processed by Fluid.</p>
<p>The Fluid project currently focuses on two important scenarios: dataset orchestration and application orchestration. Dataset orchestration allows you to cache data from a specified dataset to a Kubernetes node with specified attributes, while application orchestration schedules a specified application to a node that can store (or has stored) the specified dataset. The two can also be combined to form a collaborative orchestration scenario; the datasets and application requirements are considered for node resource scheduling.</p>
<p><img decoding="async" loading="lazy" alt="fluid" src="/zh/assets/images/zuoyebang-fluid-44b186d53e6db78e2772e0c6fe7a6f94.png" width="619" height="459" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reasons-for-choosing-fluid">Reasons for Choosing Fluid<a href="#reasons-for-choosing-fluid" class="hash-link" aria-label="Reasons for Choosing Fluid的直接链接" title="Reasons for Choosing Fluid的直接链接">​</a></h3>
<ol>
<li>The retrieval service has been containerized and naturally suitable for Fluid.</li>
<li>Fluid is used as a data orchestration system so that the upper layer can use it directly without knowing the specific data distribution. At the same time, it can realize the nearby scheduling of business and accelerate the data access performance based on the perception and scheduling capability of data.</li>
<li>Fluid implements the PVC interface, which allows a business pod to mount into the pod without awareness. Fluid can provide distributed and hierarchical caching of metadata and data and efficient file retrieval function without awareness like when using local disks.</li>
<li>Fluid + JindoRuntime has a variety of built-in cache modes (back-to-origin mode and full cache mode), different cache policies (optimization for small file scenarios), and storage methods (disk and memory), which have good adaptability to different scenarios and can meet various business scenarios without too many modifications.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-practice">Implementation Practice<a href="#implementation-practice" class="hash-link" aria-label="Implementation Practice的直接链接" title="Implementation Practice的直接链接">​</a></h3>
<ol>
<li>Separation of Cache Nodes and Compute Nodes: Fuse and worker can be deployed together to achieve better local data performance. However, we finally chose the separation of cache and compute nodes for online scenarios because it is worthwhile to extend a certain startup time for better elasticity. Also, we do not want the stability of service nodes to be entangled with the stability of cache nodes.</li>
<li>Fluid supports to schedule the datasets. In other words, it supports to schedule cache nodes. We schedule dataset cache nodes by specifying the <code>nodeAffinity</code> of the dataset, thus ensuring that cache nodes can provide efficient and flexible cache services.</li>
</ol>
<ul>
<li><strong>High Requirements for Online Scenarios</strong></li>
</ul>
<p>For online business scenarios, the system has high requirements for data access speed, integrity, and consistency. Therefore, partial data updates and unexpected back-to-origin requests cannot occur. The choice of data caching and update policies will be critical.</p>
<ul>
<li><strong>Appropriate Data Cache Policy</strong></li>
</ul>
<p>Based on the preceding requirements, we use Fluid full cache mode. In full cache mode, all requests only go through the cache instead of back-to-origin data sources. It avoids unexpected long-duration requests. At the same time, the dataload process is controlled by the data update process, which is safer and more standardized.</p>
<ul>
<li><strong>Combined with the Update Process of the Permission Flow</strong></li>
</ul>
<p>The data update of online business is a kind of CD, which also needs the update process to control. The online data distribution is safer and more standardized through the dataload mode combined with the permission flow.</p>
<ul>
<li><strong>Atomicity of Data Updates</strong></li>
</ul>
<p>Since the model is composed of many files, a complete model can only be used when all files are cached. Therefore, on the premise that there is no return origin in the full cache, it is necessary to ensure the atomicity of the dataload process. During the data loading process, the new version data cannot be accessed, and the new version of data can only be read after the data loading is completed.</p>
<p>The preceding solutions and policies (together with the automatic database building and data version management functions) improve the security and stability of the overall system significantly. At the same time, it makes the flow of the entire process more intelligent and automatic.</p>
<p><img decoding="async" loading="lazy" alt="architecture" src="/zh/assets/images/zuoyebang-architecture-ba1eb69179cb351dfe63293ca0c5eca1.png" width="782" height="686" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Summary的直接链接" title="Summary的直接链接">​</a></h2>
<p>Based on the compute-storage separation architecture of Fluid, we have achieved:</p>
<ol>
<li>Minute-level 100 T-level data distribution</li>
<li>The atomicity of data version management and data update makes data distribution and update controllable and smarter automatic processes.</li>
<li>The information retrieval service can be like a normal stateless service. Therefore, it can realize horizontal expansion using k8s HPA. Also, faster scaling brings higher stability and availability.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-work">Future Work<a href="#future-work" class="hash-link" aria-label="Future Work的直接链接" title="Future Work的直接链接">​</a></h2>
<p>The mode of compute-storage separation allows us to consider that the special services can be stateless and can be incorporated into the DevOps system like normal services. However, the Fluid-based data orchestration and acceleration system is an entry point in the compute-storage separation practice. In addition to the information retrieval system, we are about to exploring the mode of training and distribution of Fluid-based OCR system models.</p>
<p>In the future work, we plan to optimize the scheduling policy and execution mode of upper-layer jobs based on Fluid and expand model training and distribution to improve the overall training speed and resource utilization. On the other hand, it helps the community evolve its observability and high availability to help more developers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-authors">About the Authors<a href="#about-the-authors" class="hash-link" aria-label="About the Authors的直接链接" title="About the Authors的直接链接">​</a></h2>
<p>Dong Xiaocong, Head of Zuoyebang Infrastructure, is mainly responsible for architecture research and development, operation and maintenance, DBA, and security. He has been responsible for architecture and technical management for Baidu, Didi Chuxing, and other enterprises, with skills around building and iterating the business middle platform, technology middle platform, and research and development middle platform.</p>
<p>Zhang Haoran, who joined Zuoyebang in 2019, is a Senior Architect of Zuoyebang Infrastructure. During his time in Zuoyebang, he has promoted the evolution of Zuoyebang&#x27;s cloud-native architecture. He is responsible for multi-cloud k8s cluster construction, k8s component research and development, Linux kernel optimization and tuning, and containerization of underlying services.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/fluid-cloudnative/fluid-cloudnative.github.io/tree/master/versioned_docs/version-v1.0/case-study/zuoyebang-case-study.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->由 <b>chenqiming</b> <!-- -->于 <b><time datetime="2024-04-25T13:04:48.000Z">2024年4月25日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/case-study/haomo-case-study"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">HAOMO&#x27;s Case Study</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/troubleshooting-and-faq/troubleshooting"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Troubleshooting</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problems-faced-by-large-scale-information-retrieval-systems" class="table-of-contents__link toc-highlight">Problems Faced by Large-Scale Information Retrieval Systems</a><ul><li><a href="#1-dispersion-of-datasets" class="table-of-contents__link toc-highlight">1. Dispersion of Datasets</a></li><li><a href="#2-weak-auto-scaling-of-business-resources" class="table-of-contents__link toc-highlight">2. Weak Auto Scaling of Business Resources</a></li><li><a href="#3-insufficient-extensibility-for-a-single-shard-of-data" class="table-of-contents__link toc-highlight">3. Insufficient Extensibility for a Single Shard of Data</a></li></ul></li><li><a href="#compute-storage-separation-architecture-solves-complexity-issues" class="table-of-contents__link toc-highlight">Compute-Storage Separation Architecture Solves Complexity Issues</a><ul><li><a href="#component-introduction" class="table-of-contents__link toc-highlight">Component Introduction</a></li><li><a href="#reasons-for-choosing-fluid" class="table-of-contents__link toc-highlight">Reasons for Choosing Fluid</a></li><li><a href="#implementation-practice" class="table-of-contents__link toc-highlight">Implementation Practice</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#future-work" class="table-of-contents__link toc-highlight">Future Work</a></li><li><a href="#about-the-authors" class="table-of-contents__link toc-highlight">About the Authors</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh/docs">教程</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.slack.com/client/T08PSQ7BQ/C02ADG209SP" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack (#fluid channel)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/zh/community/meeting_schedule">钉钉群 (群号: 32850151)</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/community/meeting_schedule">周会</a></li><li class="footer__item"><a href="https://github.com/fluid-cloudnative/fluid/blob/master/README.md#community" target="_blank" rel="noopener noreferrer" class="footer__link-item">微信群<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/fluid-cloudnative/fluid" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The Fluid Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage</div></div></div></footer></div>
</body>
</html>