"use strict";(self.webpackChunkfluid_website_demo=self.webpackChunkfluid_website_demo||[]).push([[8736],{3184:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var s=n(7624),a=n(2172);const i={sidebar_label:"Support Image Pull Secrets",sidebar_position:10},l="Support Image Pull Secrets",r={id:"tutorials/advanced/support-image-pull-secrets",title:"Support Image Pull Secrets",description:"If the images of fluid runtime is in private docker registry, it's necessary to set image pull secret.",source:"@site/versioned_docs/version-v0.9/tutorials/advanced/support-image-pull-secrets.md",sourceDirName:"tutorials/advanced",slug:"/tutorials/advanced/support-image-pull-secrets",permalink:"/zh/docs/v0.9/tutorials/advanced/support-image-pull-secrets",draft:!1,unlisted:!1,editUrl:"https://github.com/fluid-cloudnative/fluid-cloudnative.github.io/tree/master/versioned_docs/version-v0.9/tutorials/advanced/support-image-pull-secrets.md",tags:[],version:"v0.9",lastUpdatedBy:"chenqiming",lastUpdatedAt:1714041983,formattedLastUpdatedAt:"2024\u5e744\u670825\u65e5",sidebarPosition:10,frontMatter:{sidebar_label:"Support Image Pull Secrets",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Using Fluid on ARM64 Platform",permalink:"/zh/docs/v0.9/tutorials/advanced/using-fluid-on-arm64-platform"},next:{title:"Runtime Monitoring",permalink:"/zh/docs/v0.9/operation-guide/runtime-monitoring"}},o={},c=[];function u(e){const t={a:"a",br:"br",code:"code",h1:"h1",p:"p",pre:"pre",...(0,a.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"support-image-pull-secrets",children:"Support Image Pull Secrets"}),"\n",(0,s.jsxs)(t.p,{children:["If the images of fluid runtime is in private docker registry, it's necessary to set image pull secret.\nFor related knowledge of image pull secret,",(0,s.jsx)(t.br,{}),"\n","please refer to ",(0,s.jsx)(t.a,{href:"https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/",children:"Pull an Image from a Private Registry\n"})]}),"\n",(0,s.jsxs)(t.p,{children:["Fluid supports setting image pull secrets when you deploy fluid service using helm charts, you can set the image pull secrets to ",(0,s.jsx)(t.code,{children:"values.yaml"})," like the following example"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"# fluid helm charts values.yaml \n# default imagePullSecrets value is empty\nimage:\n  imagePullSecrets: []\n\n# set values like this \n# suppose you have two image pull secret keys `test-1` and `test-2` in your cluster\nimage:\n  imagePullSecrets: \n  - name: test-1\n  - name: test-2\n"})}),"\n",(0,s.jsxs)(t.p,{children:["After setting ",(0,s.jsx)(t.code,{children:"values.yaml"})," image pull secrets, when you have deployed the fluid service,",(0,s.jsx)(t.br,{}),"\n","you can see that controller itself already uses image pull secrets"]}),"\n",(0,s.jsx)(t.p,{children:"alluxio controller yaml intercepts information"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: alluxioruntime-controller\n  namespace: fluid-system\nspec:\n  template:\n    spec:\n      containers:\n      - image: fluidcloudnative/alluxioruntime-controller:\n        name: manager\n      dnsPolicy: ClusterFirst\n      imagePullSecrets:\n      - name: test-1\n      - name: test-2\n"})}),"\n",(0,s.jsx)(t.p,{children:"fluid also supports passing the image pull secrets through the controller to the runtime service that the controller pulls up"}),"\n",(0,s.jsx)(t.p,{children:"If you want to specify the image pull key for the runtime, you can do so by editing the environment variables in the deployment associated with the runtime controller that you have created."}),"\n",(0,s.jsx)(t.p,{children:"Here is a brief YAML configuration example. When properly configured, the deployment will apply the image pull secret you specified."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"- name: IMAGE_PULL_SECRETS\n  value: test-1,test-2\n"})}),"\n",(0,s.jsxs)(t.p,{children:["In the above YAML file, ",(0,s.jsx)(t.code,{children:"IMAGE_PULL_SECRETS"})," is the name of the environment variable, and ",(0,s.jsx)(t.code,{children:"test-1,test-2"})," are the image pull keys you wish to specify, separated by commas."]}),"\n",(0,s.jsx)(t.p,{children:"alluxio runtime master yaml intercepts information"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: demo-master\n  namespace: test\nspec:\n  template:\n    spec:\n      containers:\n      - image: fluidcloudnative/alluxio:release-2.8.1-SNAPSHOT-0433ade\n        imagePullPolicy: IfNotPresent\n        name: alluxio-master\n      imagePullSecrets:\n      - name: test1\n      - name: test2\n\n"})}),"\n",(0,s.jsx)(t.p,{children:"In conclusion, image pull secrets setting successfully"})]})}function d(e={}){const{wrapper:t}={...(0,a.M)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},2172:(e,t,n)=>{n.d(t,{I:()=>r,M:()=>l});var s=n(1504);const a={},i=s.createContext(a);function l(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);